var app=function(){"use strict";function e(){}function t(e,t){for(const n in t)e[n]=t[n];return e}function n(e){return e()}function l(){return Object.create(null)}function s(e){e.forEach(n)}function i(e){return"function"==typeof e}function r(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function a(t,n,l){t.$$.on_destroy.push(function(t,...n){if(null==t)return e;const l=t.subscribe(...n);return l.unsubscribe?()=>l.unsubscribe():l}(n,l))}function o(e){const t={};for(const n in e)"$"!==n[0]&&(t[n]=e[n]);return t}function c(e,t){const n={};t=new Set(t);for(const l in e)t.has(l)||"$"===l[0]||(n[l]=e[l]);return n}function d(e,t){e.appendChild(t)}function u(e,t,n){e.insertBefore(t,n||null)}function h(e){e.parentNode.removeChild(e)}function v(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function g(e){return document.createElement(e)}function p(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function f(e){return document.createTextNode(e)}function m(){return f(" ")}function y(){return f("")}function w(e,t,n,l){return e.addEventListener(t,n,l),()=>e.removeEventListener(t,n,l)}function $(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function b(e,t){for(const n in t)$(e,n,t[n])}function x(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function _(e,t,n,l){e.style.setProperty(t,n,l?"important":"")}function k(e,t,n){e.classList[n?"add":"remove"](t)}let P;function L(e){P=e}const H=[],F=[],S=[],C=[],z=Promise.resolve();let A=!1;function B(){A||(A=!0,z.then(V))}function I(){return B(),z}function R(e){S.push(e)}let N=!1;const M=new Set;function V(){if(!N){N=!0;do{for(let e=0;e<H.length;e+=1){const t=H[e];L(t),T(t.$$)}for(L(null),H.length=0;F.length;)F.pop()();for(let e=0;e<S.length;e+=1){const t=S[e];M.has(t)||(M.add(t),t())}S.length=0}while(H.length);for(;C.length;)C.pop()();A=!1,N=!1,M.clear()}}function T(e){if(null!==e.fragment){e.update(),s(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(R)}}const E=new Set;let W;function j(){W={r:0,c:[],p:W}}function D(){W.r||s(W.c),W=W.p}function O(e,t){e&&e.i&&(E.delete(e),e.i(t))}function Y(e,t,n,l){if(e&&e.o){if(E.has(e))return;E.add(e),W.c.push((()=>{E.delete(e),l&&(n&&e.d(1),l())})),e.o(t)}}function Z(e,t){const n={},l={},s={$$scope:1};let i=e.length;for(;i--;){const r=e[i],a=t[i];if(a){for(const e in r)e in a||(l[e]=1);for(const e in a)s[e]||(n[e]=a[e],s[e]=1);e[i]=a}else for(const e in r)s[e]=1}for(const e in l)e in n||(n[e]=void 0);return n}function G(e){e&&e.c()}function K(e,t,l){const{fragment:r,on_mount:a,on_destroy:o,after_update:c}=e.$$;r&&r.m(t,l),R((()=>{const t=a.map(n).filter(i);o?o.push(...t):s(t),e.$$.on_mount=[]})),c.forEach(R)}function q(e,t){const n=e.$$;null!==n.fragment&&(s(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function U(t,n,i,r,a,o,c=[-1]){const d=P;L(t);const u=n.props||{},v=t.$$={fragment:null,ctx:null,props:o,update:e,not_equal:a,bound:l(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(d?d.$$.context:[]),callbacks:l(),dirty:c,skip_bound:!1};let g=!1;if(v.ctx=i?i(t,u,((e,n,...l)=>{const s=l.length?l[0]:n;return v.ctx&&a(v.ctx[e],v.ctx[e]=s)&&(!v.skip_bound&&v.bound[e]&&v.bound[e](s),g&&function(e,t){-1===e.$$.dirty[0]&&(H.push(e),B(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}(t,e)),n})):[],v.update(),g=!0,s(v.before_update),v.fragment=!!r&&r(v.ctx),n.target){if(n.hydrate){const e=function(e){return Array.from(e.childNodes)}(n.target);v.fragment&&v.fragment.l(e),e.forEach(h)}else v.fragment&&v.fragment.c();n.intro&&O(t.$$.fragment),K(t,n.target,n.anchor),V()}L(d)}class J{$destroy(){q(this,1),this.$destroy=e}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Q=[];const X=new class{constructor(){this.notfoundCallback=()=>{},this.routers=[],this.pathInfoWritable=function(t,n=e){let l;const s=[];function i(e){if(r(t,e)&&(t=e,l)){const e=!Q.length;for(let e=0;e<s.length;e+=1){const n=s[e];n[1](),Q.push(n,t)}if(e){for(let e=0;e<Q.length;e+=2)Q[e][0](Q[e+1]);Q.length=0}}}return{set:i,update:function(e){i(e(t))},subscribe:function(r,a=e){const o=[r,a];return s.push(o),1===s.length&&(l=n(i)||e),r(t),()=>{const e=s.indexOf(o);-1!==e&&s.splice(e,1),0===s.length&&(l(),l=null)}}}}(this.path),this.rule=null,this.path=null,this.pathInfo=null,this._setPath("")}getPath(){return this.pathInfo}getPathWritable(){return this.pathInfoWritable}setNotFound(e){this.notfoundCallback=e}add(e,t){this.routers.push({regexp:e,callback:t})}_setPath(e){this.rule=e;this.pathInfo={rule:e,path:e,parts:[]},this.pathInfoWritable.set(this.pathInfo)}async go(e,t=!0){if(this.rule===e)return;const n=this.routers.find((t=>t.regexp.test(e)));if(!n)return this.notfoundCallback();if(this._setPath(e),console.log(e),t){const t=new URLSearchParams(location.search);t.set("rule",e),location.pathname,t.toString(),location.hash,history.pushState({},"",location.pathname+"?"+t.toString()+location.hash)}await I(),n.callback()}goWithoutPushState(e){return this.go(e,!1)}fromPath(){const e=new URLSearchParams(location.search);this.goWithoutPushState(e.get("rule"))}};function ee(t){let n,l,i,r,a,o,c,v,p,f,y;return{c(){n=g("div"),l=g("div"),i=g("div"),i.textContent="Правила игры",r=m(),a=g("div"),a.textContent="Посмотреть игру",o=m(),c=g("div"),c.textContent="Контакты",v=m(),p=g("div"),p.innerHTML='<div class="a text_underline svelte-16wvx70">Регистрация</div> \n\t\t<div class="a text_underline svelte-16wvx70">Забыли пароль</div>',$(i,"class","a svelte-16wvx70"),k(i,"aActive","/game-rules"===t[0].path),$(a,"class","a svelte-16wvx70"),k(a,"aActive","/current-games"===t[0].path),$(c,"class","a svelte-16wvx70"),$(l,"class","flex cgap30 svelte-16wvx70"),$(p,"class","flex cgap30 svelte-16wvx70"),$(n,"class","container flex svelte-16wvx70")},m(e,s){u(e,n,s),d(n,l),d(l,i),d(l,r),d(l,a),d(l,o),d(l,c),d(n,v),d(n,p),f||(y=[w(i,"click",t[2]),w(a,"click",t[3])],f=!0)},p(e,[t]){1&t&&k(i,"aActive","/game-rules"===e[0].path),1&t&&k(a,"aActive","/current-games"===e[0].path)},i:e,o:e,d(e){e&&h(n),f=!1,s(y)}}}function te(e,t,n){let l;const{pathInfoWritable:s}=X;a(e,s,(e=>n(0,l=e)));return[l,s,()=>X.go("/game-rules"),()=>X.go("/current-games")]}class ne extends J{constructor(e){super(),U(this,e,te,ee,r,{})}}function le(n){let l,s,i=[{width:"14"},{height:"14"},{viewBox:"0 0 14 14"},{xmlns:"http://www.w3.org/2000/svg"},{fill:"black"},n[0]],r={};for(let e=0;e<i.length;e+=1)r=t(r,i[e]);return{c(){l=p("svg"),s=p("path"),$(s,"fill-rule","evenodd"),$(s,"clip-rule","evenodd"),$(s,"d","M14 8H8V14H6V8H0V6H6V0H8V6H14V8Z"),b(l,r)},m(e,t){u(e,l,t),d(l,s)},p(e,[t]){b(l,r=Z(i,[{width:"14"},{height:"14"},{viewBox:"0 0 14 14"},{xmlns:"http://www.w3.org/2000/svg"},{fill:"black"},1&t&&e[0]]))},i:e,o:e,d(e){e&&h(l)}}}function se(e,n,l){const s=[];let i=c(n,s);return e.$$set=e=>{n=t(t({},n),o(e)),l(0,i=c(n,s))},[i]}class ie extends J{constructor(e){super(),U(this,e,se,le,r,{})}}function re(n){let l,s,i=[{width:"23"},{height:"23"},{viewBox:"0 0 23 23"},{fill:"#FF0000"},{xmlns:"http://www.w3.org/2000/svg"},n[0]],r={};for(let e=0;e<i.length;e+=1)r=t(r,i[e]);return{c(){l=p("svg"),s=p("path"),$(s,"d","M13.6433 9.2217H23V13.0189H13.6433V23H9.35671V13.0189H0V9.2217H9.35671V0H13.6433V9.2217Z"),b(l,r)},m(e,t){u(e,l,t),d(l,s)},p(e,[t]){b(l,r=Z(i,[{width:"23"},{height:"23"},{viewBox:"0 0 23 23"},{fill:"#FF0000"},{xmlns:"http://www.w3.org/2000/svg"},1&t&&e[0]]))},i:e,o:e,d(e){e&&h(l)}}}function ae(e,n,l){const s=[];let i=c(n,s);return e.$$set=e=>{n=t(t({},n),o(e)),l(0,i=c(n,s))},[i]}class oe extends J{constructor(e){super(),U(this,e,ae,re,r,{})}}function ce(n){let l,s,i=[{width:"33"},{height:"33"},{viewBox:"0 0 33 33"},{xmlns:"http://www.w3.org/2000/svg"},{fill:"#979797"},n[0]],r={};for(let e=0;e<i.length;e+=1)r=t(r,i[e]);return{c(){l=p("svg"),s=p("path"),$(s,"d","M16.0806 13.1412L22.5213 6.35413L25.2757 8.96793L18.835 15.755L26.075 22.6256L23.1243 25.735L15.8843 18.8644L9.44355 25.6515L6.68918 23.0377L13.1299 16.2506L6.44074 9.90282L9.39142 6.79345L16.0806 13.1412Z"),b(l,r)},m(e,t){u(e,l,t),d(l,s)},p(e,[t]){b(l,r=Z(i,[{width:"33"},{height:"33"},{viewBox:"0 0 33 33"},{xmlns:"http://www.w3.org/2000/svg"},{fill:"#979797"},1&t&&e[0]]))},i:e,o:e,d(e){e&&h(l)}}}function de(e,n,l){const s=[];let i=c(n,s);return e.$$set=e=>{n=t(t({},n),o(e)),l(0,i=c(n,s))},[i]}class ue extends J{constructor(e){super(),U(this,e,de,ce,r,{})}}function he(t){let n,l,s;return{c(){n=g("div"),l=m(),s=g("div"),s.innerHTML='<div class="logoGroup svelte-17ve99s"><div class="mafiaLabel svelte-17ve99s">MAFIA</div> \n\t\t<div class="onlineLabel svelte-17ve99s">online</div> \n\t\t<div style="height: 139rem;"></div> \n\t\t<button class="signinBtn svelte-17ve99s">ВОЙТИ</button></div>',$(n,"class","background svelte-17ve99s"),$(s,"class","container svelte-17ve99s")},m(e,t){u(e,n,t),u(e,l,t),u(e,s,t)},p:e,i:e,o:e,d(e){e&&h(n),e&&h(l),e&&h(s)}}}class ve extends J{constructor(e){super(),U(this,e,null,he,r,{})}}function ge(n){let l,s,i=[{width:"8"},{height:"12"},{viewBox:"0 0 8 12"},{xmlns:"http://www.w3.org/2000/svg"},{fill:"#979797"},n[0]],r={};for(let e=0;e<i.length;e+=1)r=t(r,i[e]);return{c(){l=p("svg"),s=p("path"),$(s,"fill-rule","evenodd"),$(s,"clip-rule","evenodd"),$(s,"d","M7.41 1.41L6 0L0 6L6 12L7.41 10.59L2.83 6L7.41 1.41Z"),b(l,r)},m(e,t){u(e,l,t),d(l,s)},p(e,[t]){b(l,r=Z(i,[{width:"8"},{height:"12"},{viewBox:"0 0 8 12"},{xmlns:"http://www.w3.org/2000/svg"},{fill:"#979797"},1&t&&e[0]]))},i:e,o:e,d(e){e&&h(l)}}}function pe(e,n,l){const s=[];let i=c(n,s);return e.$$set=e=>{n=t(t({},n),o(e)),l(0,i=c(n,s))},[i]}class fe extends J{constructor(e){super(),U(this,e,pe,ge,r,{})}}function me(n){let l,s,i=[{width:"8"},{height:"12"},{viewBox:"0 0 8 12"},{xmlns:"http://www.w3.org/2000/svg"},{fill:"#979797"},n[0]],r={};for(let e=0;e<i.length;e+=1)r=t(r,i[e]);return{c(){l=p("svg"),s=p("path"),$(s,"fill-rule","evenodd"),$(s,"clip-rule","evenodd"),$(s,"d","M1.99984 0L0.589844 1.41L5.16984 6L0.589844 10.59L1.99984 12L7.99984 6L1.99984 0Z"),b(l,r)},m(e,t){u(e,l,t),d(l,s)},p(e,[t]){b(l,r=Z(i,[{width:"8"},{height:"12"},{viewBox:"0 0 8 12"},{xmlns:"http://www.w3.org/2000/svg"},{fill:"#979797"},1&t&&e[0]]))},i:e,o:e,d(e){e&&h(l)}}}function ye(e,n,l){const s=[];let i=c(n,s);return e.$$set=e=>{n=t(t({},n),o(e)),l(0,i=c(n,s))},[i]}class we extends J{constructor(e){super(),U(this,e,ye,me,r,{})}}let $e="undefined"!=typeof ResizeObserver;const be=new Set;window.addEventListener("resize",(()=>{for(const e of be.values())e()}));const xe=(e,t)=>{if($e){const n=new ResizeObserver((n=>t(e.getBoundingClientRect())));return n.observe(e),{destroy:()=>n.disconnect()}}const n=["x","y","height","width"];let l={};const s=()=>{const s=e.getBoundingClientRect();n.some((e=>l[e]!==s[e]))&&t(s),l=s};s(),be.add(s);const i=setInterval(s,100);return{destroy(){clearInterval(i),be.delete(s)}}};function _e(e,t,n){const l=e.slice();return l[14]=t[n],l[16]=n,l}function ke(t){let n,l,s,i,r,a,o,c=t[14].title+"",v=t[14].description+"";return{c(){n=g("div"),l=g("div"),s=f(c),i=m(),r=g("div"),a=f(v),o=m(),$(l,"class","gameRuleTitle svelte-zwn93r"),$(r,"class","gameRuleDescription svelte-zwn93r"),$(n,"class","gameRule")},m(e,t){u(e,n,t),d(n,l),d(l,s),d(n,i),d(n,r),d(r,a),d(n,o)},p:e,d(e){e&&h(n)}}}function Pe(t){let n,l,r,a,o,c,p,f,y,b,x,k,P,L,H,F,S,C,z,A,B,I,R=t[7],N=[];for(let e=0;e<R.length;e+=1)N[e]=ke(_e(t,R,e));return F=new fe({props:{style:"width: 7px; height: 12px;",fill:t[4]?"#FFF":"#979797"}}),z=new we({props:{style:"width: 7px; height: 12px;",fill:t[3]?"#FFF":"#979797"}}),{c(){n=g("div"),l=g("div"),r=g("div"),r.textContent="Правила",a=m(),o=g("div"),c=m(),p=g("div"),f=g("div");for(let e=0;e<N.length;e+=1)N[e].c();b=m(),x=g("div"),k=m(),P=g("div"),L=g("div"),H=g("div"),G(F.$$.fragment),S=m(),C=g("div"),G(z.$$.fragment),$(r,"class","gameRuleLabel svelte-zwn93r"),_(o,"height","64rem"),$(f,"class","gameRulesWrapper svelte-zwn93r"),_(f,"transform","translate3d(0px, "+t[0]+"px, 0)"),$(p,"class","gameRules svelte-zwn93r"),_(x,"height","40rem"),$(H,"class","arrowBtn svelte-zwn93r"),$(C,"class","arrowBtn svelte-zwn93r"),$(L,"class","control svelte-zwn93r"),$(P,"class","containerControl svelte-zwn93r"),$(l,"class","content svelte-zwn93r"),$(n,"class","body svelte-zwn93r")},m(s,h){u(s,n,h),d(n,l),d(l,r),d(l,a),d(l,o),d(l,c),d(l,p),d(p,f);for(let e=0;e<N.length;e+=1)N[e].m(f,null);var v;t[8](f),t[9](p),d(l,b),d(l,x),d(l,k),d(l,P),d(P,L),d(L,H),K(F,H,null),d(L,S),d(L,C),K(z,C,null),A=!0,B||(I=[(v=y=xe.call(null,p,t[5]),v&&i(v.destroy)?v.destroy:e),w(H,"click",t[6](-1)),w(C,"click",t[6](1))],B=!0)},p(e,[t]){if(128&t){let n;for(R=e[7],n=0;n<R.length;n+=1){const l=_e(e,R,n);N[n]?N[n].p(l,t):(N[n]=ke(l),N[n].c(),N[n].m(f,null))}for(;n<N.length;n+=1)N[n].d(1);N.length=R.length}(!A||1&t)&&_(f,"transform","translate3d(0px, "+e[0]+"px, 0)");const n={};16&t&&(n.fill=e[4]?"#FFF":"#979797"),F.$set(n);const l={};8&t&&(l.fill=e[3]?"#FFF":"#979797"),z.$set(l)},i(e){A||(O(F.$$.fragment,e),O(z.$$.fragment,e),A=!0)},o(e){Y(F.$$.fragment,e),Y(z.$$.fragment,e),A=!1},d(e){e&&h(n),v(N,e),t[8](null),t[9](null),q(F),q(z),B=!1,s(I)}}}function Le(e,t,n){let l,s,i=0,r=0,a=[],o=0;function c(){const{y:e,height:t}=l.getBoundingClientRect(),u=[...s.querySelectorAll(".gameRule")];if(u.length!==d.length)return I().then(c);a=d.map(((t,n)=>{const{y:l,height:s}=u[n].getBoundingClientRect();return a[n]={y:l-i-e,height:s,el:u[n]}})),n(12,o=Math.max(0,Math.min(a.length-1,o))),n(0,i=-a[o].y),n(10,r=0),a.map((e=>{e.el.style.visibility="";const l=e.y+i;l<0||l+e.height>t?e.el.style.visibility="hidden":n(10,r++,r)})),console.log(a,r)}const d=[{title:"Как общаться с другими игроками?",description:"Если нажать на чей-то ник, то можно написать сообщение, адресованное именно ему, но доступное для чтения всем остальным присутствующим на улице. Если нажать на конверт, то сообщение будет приватным и окажется видным только Вам и адресату."},{title:"Как начать игру?",description:"На главной странице можно создать партию самому, нажав кнопку «Создать». Либо же присоединиться к уже созданной заявке, нажав на красный крест справа от заявки. Игра начинается с того момента, когда наберётся указанное максимальное количество игроков, либо же истечёт время ожидания, а игроков в заявке будет 7 или более."},{title:"Какие роли есть в игре?",description:"После начала партии случайным образом происходит распределение ролей. Выбор ролей ограничивается тремя: комиссар, мафия и честный человек."},{title:"Как проходит игра?",description:"\nПервые две минуты игры уходят на то, чтоб мафия могла обсудить план действий. Далее игра приобретает циклический характер:\nДень:\n   — Голосование, выбор посадки (днём честные жители, во время обсуждения, пытаются вычислить, кто в игре — мафия, и путём голосования выбирают, кого посадить в тюрьму)\nНочь:\n   — Ход комиссара (комиссар может проверить любого игрока и узнать его настоящую роль, а ночью мафия убивает честных жителей)\n   — Ход мафии (чтобы убить честного жителя, мафия должна консолидированно проголосовать за одного и того же игрока)\nИгра продолжается до тех пор, пока в городе не останутся только честные жители или мафиози."},{title:"Комиссар (ком, шериф)",description:"Комиссар в свой ход может узнать роль любого другого игрока. А затем известить о своей проверке всех остальных. Если комиссар оказывается под угрозой посадки, то он должен огласить свою роль. Комиссар играет за честных жителей."},{title:"Честный человек (чиж, мир)",description:"Знает только свою роль. Должен помнить, что в игре есть комиссар, словам которого можно доверять."},{title:"Мафия",description:"Мафия видит свою роль и роль напарника. В первые две минуты у них есть возможность обсудить план на игру с помощью приватных сообщений. Ночью для убийства необходимо, чтоб каждый мафиози выбрал одну и ту же жертву."},{title:"Задача в игре",description:"Для мафии — убить всех честных жителей, для честных жителей — посадить всю мафию в тюрьму. Игра продолжается до тех пор, пока в городе не останутся только честные жители или мафиози.\nЭто очень краткие правила игры в мафию, но их вполне хватит для понимания процесса игры."}];let u,h;return e.$$.update=()=>{4096&e.$$.dirty&&n(4,u=o>0),5120&e.$$.dirty&&n(3,h=o+r<d.length)},[i,l,s,h,u,function(){c()},e=>t=>{const{height:s}=l.getBoundingClientRect(),i=a.slice(0,o).reverse();let d=0,v=0;for(;d<i.length&&v<s;d++)v+=i[d].height;e>0&&h?n(12,o+=r):e<0&&u&&n(12,o-=d),I().then(c)},d,function(e){F[e?"unshift":"push"]((()=>{s=e,n(2,s)}))},function(e){F[e?"unshift":"push"]((()=>{l=e,n(1,l)}))}]}class He extends J{constructor(e){super(),U(this,e,Le,Pe,r,{})}}function Fe(e,t,n){const l=e.slice();return l[3]=t[n],l}function Se(e){let t,n;return t=new oe({props:{style:"width: 23rem; height: 23rem;"}}),{c(){G(t.$$.fragment)},m(e,l){K(t,e,l),n=!0},i(e){n||(O(t.$$.fragment,e),n=!0)},o(e){Y(t.$$.fragment,e),n=!1},d(e){q(t,e)}}}function Ce(e){let t,n;return t=new ue({props:{style:"width: 35rem; height: 35rem;"}}),{c(){G(t.$$.fragment)},m(e,l){K(t,e,l),n=!0},i(e){n||(O(t.$$.fragment,e),n=!0)},o(e){Y(t.$$.fragment,e),n=!1},d(e){q(t,e)}}}function ze(t){let n,l,s,i,r,a,o,c,v,p,y,w,b,x,k,P,L,H,F,S,C,z,A,B,I,R,N,M,V,T,E,W,j=t[0](t[3].date)+"",D=t[3].id+"",Z=t[3].maxNumPlayers+"",G=t[3].maxNumPlayers-t[3].players.length+"",K=t[3].players.join(", ")+"";const q=[Ce,Se],U=[];return C=function(e,t){return e[3].hasSelf?0:1}(t),z=U[C]=q[C](t),{c(){n=g("div"),l=g("div"),s=g("div"),i=g("div"),r=f(j),a=m(),o=g("div"),c=f("№"),v=f(D),p=m(),y=g("div"),w=f("Макс. игроков: "),b=f(Z),x=m(),k=g("div"),P=f("Ожидает "),L=f(G),H=f(" участников\r\n\t\t\t\t\t\t"),F=g("div"),S=m(),z.c(),A=m(),B=g("div"),I=g("div"),R=m(),N=g("div"),M=m(),V=g("div"),T=f(K),E=m(),$(s,"class","gameItemInfoLabel svelte-97b8u7"),_(F,"width","23rem"),$(k,"class","gameItemInfoAction svelte-97b8u7"),$(l,"class","gameItemInfo svelte-97b8u7"),$(I,"class","gameItemProgressTrack svelte-97b8u7"),$(N,"class","gameItemProgressThumb svelte-97b8u7"),_(N,"width",t[3].players.length/t[3].maxNumPlayers*100+"%"),$(B,"class","gameItemProgress svelte-97b8u7"),$(V,"class","gameItemPlayers svelte-97b8u7"),$(n,"class","gameItem svelte-97b8u7")},m(e,t){u(e,n,t),d(n,l),d(l,s),d(s,i),d(i,r),d(s,a),d(s,o),d(o,c),d(o,v),d(s,p),d(s,y),d(y,w),d(y,b),d(l,x),d(l,k),d(k,P),d(k,L),d(k,H),d(k,F),d(k,S),U[C].m(k,null),d(n,A),d(n,B),d(B,I),d(B,R),d(B,N),d(n,M),d(n,V),d(V,T),d(n,E),W=!0},p:e,i(e){W||(O(z),W=!0)},o(e){Y(z),W=!1},d(e){e&&h(n),U[C].d()}}}function Ae(e){let t,n,l,s,i,r,a,o,c,p,y,w,b,x,k,P;r=new ie({props:{style:"width: 14px; height: 14px;"}});let L=e[1],H=[];for(let t=0;t<L.length;t+=1)H[t]=ze(Fe(e,L,t));const F=e=>Y(H[e],1,1,(()=>{H[e]=null}));return{c(){t=g("div"),n=g("div"),l=g("div"),l.textContent="Текущие игры",s=m(),i=g("button"),G(r.$$.fragment),a=f("создать"),o=m(),c=g("div"),p=m(),y=g("div"),w=m(),b=g("div"),x=m(),k=g("div");for(let e=0;e<H.length;e+=1)H[e].c();$(l,"class","currentGamesLabel svelte-97b8u7"),$(i,"class","createGameButton svelte-97b8u7"),$(n,"class","header svelte-97b8u7"),_(c,"height","17rem"),_(y,"background","#FFFFFF"),_(y,"mix-blend-mode","normal"),_(y,"opacity","0.12"),_(y,"width","100%"),_(y,"height","1px"),_(b,"height","31rem"),$(k,"class","gameList svelte-97b8u7"),$(t,"class","container svelte-97b8u7")},m(e,h){u(e,t,h),d(t,n),d(n,l),d(n,s),d(n,i),K(r,i,null),d(i,a),d(t,o),d(t,c),d(t,p),d(t,y),d(t,w),d(t,b),d(t,x),d(t,k);for(let e=0;e<H.length;e+=1)H[e].m(k,null);P=!0},p(e,[t]){if(3&t){let n;for(L=e[1],n=0;n<L.length;n+=1){const l=Fe(e,L,n);H[n]?(H[n].p(l,t),O(H[n],1)):(H[n]=ze(l),H[n].c(),O(H[n],1),H[n].m(k,null))}for(j(),n=L.length;n<H.length;n+=1)F(n);D()}},i(e){if(!P){O(r.$$.fragment,e);for(let e=0;e<L.length;e+=1)O(H[e]);P=!0}},o(e){Y(r.$$.fragment,e),H=H.filter(Boolean);for(let e=0;e<H.length;e+=1)Y(H[e]);P=!1},d(e){e&&h(t),q(r),v(H,e)}}}function Be(e){const t=()=>Date.now()-(1e6*Math.random()|0);let n=[{date:t(),id:35487,maxNumPlayers:11,players:["Lupusregina[beta]","Den Ri","Зомби Ich bin Roboter","Bunk Bunkovich","Aleksander irreligious86","Chingiz Mam"]},{date:t(),id:35488,maxNumPlayers:11,players:["Зомби Ich bin Roboter"]},{date:t(),id:35489,maxNumPlayers:9,players:["Bunk Bunkovich","Aleksander irreligious86"]},{date:t(),id:35490,maxNumPlayers:11,players:["Lupusregina[beta]","Den Ri","Зомби Ich bin Roboter","Bunk Bunkovich","Aleksander irreligious86","Chingiz Mam"],hasSelf:!0}];for(let e=0;e<10;e++)n.push(n[Math.random()*n.length|0]);return[e=>{const t=new Date(e),n=e=>(e+"").padStart(2,0);return[t.getDay()+1,t.getMonth(),n(t.getFullYear()%2e3)].map(n).join(".")+" "+[t.getHours(),t.getMinutes(),t.getSeconds()].map(n).join(":")},n]}class Ie extends J{constructor(e){super(),U(this,e,Be,Ae,r,{})}}function Re(e,t,n){const l=e.slice();return l[28]=t[n],l}function Ne(e,t,n){const l=e.slice();return l[28]=t[n],l}function Me(e,t,n){const l=e.slice();return l[28]=t[n],l}function Ve(e){let t,n,l;return{c(){t=g("div"),t.textContent="Ожидается начало игры",n=m(),l=g("div"),l.innerHTML='<div class="svelte-yr7pgh">Список игроков:</div> \n\t\t<div class="playerList svelte-yr7pgh"><div class="svelte-yr7pgh">Lupusregina[beta]</div> \n\t\t\t<div class="svelte-yr7pgh">pacificescape</div> \n\t\t\t<div class="svelte-yr7pgh">Alex Kovalev</div> \n\t\t\t<div class="svelte-yr7pgh">bakunov</div> \n\t\t\t<div class="svelte-yr7pgh">Den ri</div></div>',$(t,"class","svelte-yr7pgh"),$(l,"class","svelte-yr7pgh")},m(e,s){u(e,t,s),u(e,n,s),u(e,l,s)},d(e){e&&h(t),e&&h(n),e&&h(l)}}}function Te(t){let n,l;return{c(){n=g("video"),n.src!==(l="/assets/witch.mp4")&&$(n,"src","/assets/witch.mp4"),$(n,"class","svelte-yr7pgh")},m(e,l){u(e,n,l),t[16](n)},p:e,d(e){e&&h(n),t[16](null)}}}function Ee(t){let n,l;return{c(){n=g("video"),n.src!==(l="/assets/sunrise.mp4")&&$(n,"src","/assets/sunrise.mp4"),$(n,"class","svelte-yr7pgh")},m(e,l){u(e,n,l),t[17](n)},p:e,d(e){e&&h(n),t[17](null)}}}function We(e){let t,n,l,s,i=e[6],r=[];for(let t=0;t<i.length;t+=1)r[t]=je(Me(e,i,t));return{c(){t=g("div"),n=g("div"),n.textContent="Кого будем вешать:",l=m(),s=g("div");for(let e=0;e<r.length;e+=1)r[e].c();$(n,"class","svelte-yr7pgh"),$(s,"class","playerList svelte-yr7pgh"),$(t,"class","svelte-yr7pgh")},m(e,i){u(e,t,i),d(t,n),d(t,l),d(t,s);for(let e=0;e<r.length;e+=1)r[e].m(s,null)},p(e,t){if(4160&t[0]){let n;for(i=e[6],n=0;n<i.length;n+=1){const l=Me(e,i,n);r[n]?r[n].p(l,t):(r[n]=je(l),r[n].c(),r[n].m(s,null))}for(;n<r.length;n+=1)r[n].d(1);r.length=i.length}},d(e){e&&h(t),v(r,e)}}}function je(e){let t,n,l,s,r,a,o,c,v,p,y,b,_,P,L,H,F,S=e[28].voteHangedPlayers.size+"",C=e[28].name+"",z=e[28].id+"";return{c(){t=g("div"),n=g("div"),l=g("div"),s=m(),r=g("div"),a=f(S),o=m(),c=g("div"),v=g("div"),p=f(C),y=m(),b=g("div"),_=f("Player "),P=f(z),L=m(),$(l,"class","avatar svelte-yr7pgh"),$(r,"class","showVote svelte-yr7pgh"),$(n,"class","containerAvatar svelte-yr7pgh"),$(v,"class","playerName svelte-yr7pgh"),$(b,"class","playerId svelte-yr7pgh"),$(c,"class","svelte-yr7pgh"),$(t,"class","player svelte-yr7pgh"),k(t,"dead",e[28].dead)},m(h,g){u(h,t,g),d(t,n),d(n,l),d(n,s),d(n,r),d(r,a),d(t,o),d(t,c),d(c,v),d(v,p),d(c,y),d(c,b),d(b,_),d(b,P),d(t,L),H||(F=w(t,"click",(function(){i(e[12](e[28]))&&e[12](e[28]).apply(this,arguments)})),H=!0)},p(n,l){e=n,64&l[0]&&S!==(S=e[28].voteHangedPlayers.size+"")&&x(a,S),64&l[0]&&C!==(C=e[28].name+"")&&x(p,C),64&l[0]&&z!==(z=e[28].id+"")&&x(P,z),64&l[0]&&k(t,"dead",e[28].dead)},d(e){e&&h(t),H=!1,F()}}}function De(e){let t,n,l,i,r,a,o,c,v,p,y,b,P,L,H,F,S,C,z,A,B,I,R,N,M,V,T,E,W=e[8].voteHangedFinalYesPlayers.size+"",j=e[8].voteHangedFinalNoPlayers.size+"",D=e[8].name+"",O=e[8].id+"";return{c(){t=g("div"),n=g("div"),n.textContent="Точно хотите повесить:",l=m(),i=g("div"),r=g("div"),a=g("div"),o=m(),c=g("div"),v=f(W),p=f("/"),y=f(j),b=m(),P=g("div"),L=g("div"),H=f(D),F=m(),S=g("div"),C=f("Player "),z=f(O),A=m(),B=g("div"),I=m(),R=g("div"),N=g("div"),N.textContent="Yes",M=m(),V=g("div"),V.textContent="No",$(n,"class","svelte-yr7pgh"),$(a,"class","avatar svelte-yr7pgh"),$(c,"class","showVote svelte-yr7pgh"),$(r,"class","containerAvatar svelte-yr7pgh"),$(L,"class","playerName svelte-yr7pgh"),$(S,"class","playerId svelte-yr7pgh"),$(P,"class","svelte-yr7pgh"),$(i,"class","player svelte-yr7pgh"),k(i,"dead",e[8].dead),_(B,"height","10px"),$(B,"class","svelte-yr7pgh"),$(N,"class","voteBtn svelte-yr7pgh"),$(V,"class","voteBtn svelte-yr7pgh"),$(R,"class","voteBtnGroup svelte-yr7pgh"),$(t,"class","svelte-yr7pgh")},m(s,h){u(s,t,h),d(t,n),d(t,l),d(t,i),d(i,r),d(r,a),d(r,o),d(r,c),d(c,v),d(c,p),d(c,y),d(i,b),d(i,P),d(P,L),d(L,H),d(P,F),d(P,S),d(S,C),d(S,z),d(t,A),d(t,B),d(t,I),d(t,R),d(R,N),d(R,M),d(R,V),T||(E=[w(N,"click",e[15](1)),w(V,"click",e[15](-1))],T=!0)},p(e,t){256&t[0]&&W!==(W=e[8].voteHangedFinalYesPlayers.size+"")&&x(v,W),256&t[0]&&j!==(j=e[8].voteHangedFinalNoPlayers.size+"")&&x(y,j),256&t[0]&&D!==(D=e[8].name+"")&&x(H,D),256&t[0]&&O!==(O=e[8].id+"")&&x(z,O),256&t[0]&&k(i,"dead",e[8].dead)},d(e){e&&h(t),T=!1,s(E)}}}function Oe(e){let t;return{c(){t=g("div"),t.innerHTML='<div class="svelte-yr7pgh">Жители не смогли договорится и разошлись</div>',$(t,"class","svelte-yr7pgh")},m(e,n){u(e,t,n)},d(e){e&&h(t)}}}function Ye(e){let t;function n(e,t){return e[8].dead?Ge:Ze}let l=n(e),s=l(e);return{c(){t=g("div"),s.c(),$(t,"class","svelte-yr7pgh")},m(e,n){u(e,t,n),s.m(t,null)},p(e,i){l===(l=n(e))&&s?s.p(e,i):(s.d(1),s=l(e),s&&(s.c(),s.m(t,null)))},d(e){e&&h(t),s.d()}}}function Ze(e){let t,n,l,s,i=e[8].name+"";return{c(){t=g("div"),n=f("Игрок "),l=f(i),s=f(" был оправдан"),$(t,"class","svelte-yr7pgh")},m(e,i){u(e,t,i),d(t,n),d(t,l),d(t,s)},p(e,t){256&t[0]&&i!==(i=e[8].name+"")&&x(l,i)},d(e){e&&h(t)}}}function Ge(e){let t,n,l,s,i,r=e[8].name+"",a=e[10](e[8].role)+"";return{c(){t=g("div"),n=f("Игрок "),l=f(r),s=f(" был повешен, он был "),i=f(a),$(t,"class","svelte-yr7pgh")},m(e,r){u(e,t,r),d(t,n),d(t,l),d(t,s),d(t,i)},p(e,t){256&t[0]&&r!==(r=e[8].name+"")&&x(l,r),256&t[0]&&a!==(a=e[10](e[8].role)+"")&&x(i,a)},d(e){e&&h(t)}}}function Ke(e){let t,n,l,s="peaceful"===e[7].role&&qe(),i="don"===e[7].role&&Ue(e),r="commissioner"===e[7].role&&Qe(e);return{c(){t=g("div"),s&&s.c(),n=m(),i&&i.c(),l=m(),r&&r.c(),$(t,"class","svelte-yr7pgh")},m(e,a){u(e,t,a),s&&s.m(t,null),d(t,n),i&&i.m(t,null),d(t,l),r&&r.m(t,null)},p(e,a){"peaceful"===e[7].role?s||(s=qe(),s.c(),s.m(t,n)):s&&(s.d(1),s=null),"don"===e[7].role?i?i.p(e,a):(i=Ue(e),i.c(),i.m(t,l)):i&&(i.d(1),i=null),"commissioner"===e[7].role?r?r.p(e,a):(r=Qe(e),r.c(),r.m(t,null)):r&&(r.d(1),r=null)},d(e){e&&h(t),s&&s.d(),i&&i.d(),r&&r.d()}}}function qe(e){let t;return{c(){t=f("Вы отдыхаете и ждете дня")},m(e,n){u(e,t,n)},d(e){e&&h(t)}}}function Ue(e){let t,n,l,s=e[6],i=[];for(let t=0;t<s.length;t+=1)i[t]=Je(Ne(e,s,t));return{c(){t=g("div"),t.textContent="Кого будем убивать:",n=m(),l=g("div");for(let e=0;e<i.length;e+=1)i[e].c();$(t,"class","svelte-yr7pgh"),$(l,"class","playerList svelte-yr7pgh")},m(e,s){u(e,t,s),u(e,n,s),u(e,l,s);for(let e=0;e<i.length;e+=1)i[e].m(l,null)},p(e,t){if(8256&t[0]){let n;for(s=e[6],n=0;n<s.length;n+=1){const r=Ne(e,s,n);i[n]?i[n].p(r,t):(i[n]=Je(r),i[n].c(),i[n].m(l,null))}for(;n<i.length;n+=1)i[n].d(1);i.length=s.length}},d(e){e&&h(t),e&&h(n),e&&h(l),v(i,e)}}}function Je(e){let t,n,l,s,r,a,o,c,v,p,y,b,_,P,L,H,F,S=e[28].vote+"",C=e[28].name+"",z=e[28].id+"";return{c(){t=g("div"),n=g("div"),l=g("div"),s=m(),r=g("div"),a=f(S),o=m(),c=g("div"),v=g("div"),p=f(C),y=m(),b=g("div"),_=f("Player "),P=f(z),L=m(),$(l,"class","avatar svelte-yr7pgh"),$(r,"class","showVote svelte-yr7pgh"),$(n,"class","containerAvatar svelte-yr7pgh"),$(v,"class","playerName svelte-yr7pgh"),$(b,"class","playerId svelte-yr7pgh"),$(c,"class","svelte-yr7pgh"),$(t,"class","player svelte-yr7pgh"),k(t,"dead",e[28].dead)},m(h,g){u(h,t,g),d(t,n),d(n,l),d(n,s),d(n,r),d(r,a),d(t,o),d(t,c),d(c,v),d(v,p),d(c,y),d(c,b),d(b,_),d(b,P),d(t,L),H||(F=w(t,"click",(function(){i(e[13](e[28]))&&e[13](e[28]).apply(this,arguments)})),H=!0)},p(n,l){e=n,64&l[0]&&S!==(S=e[28].vote+"")&&x(a,S),64&l[0]&&C!==(C=e[28].name+"")&&x(p,C),64&l[0]&&z!==(z=e[28].id+"")&&x(P,z),64&l[0]&&k(t,"dead",e[28].dead)},d(e){e&&h(t),H=!1,F()}}}function Qe(e){let t,n,l,s,i,r,a,o,c,v,p;function b(e,t){return e[2]?et:Xe}let x=b(e),P=x(e);return{c(){t=g("div"),t.textContent="Кого будем проверять/убивать:",n=m(),l=g("div"),s=g("div"),i=g("div"),i.textContent="Убить",r=f("\r\n\t\t\t\t\t/\r\n\t\t\t\t\t"),a=g("div"),a.textContent="Проверить",o=m(),P.c(),c=y(),$(t,"class","svelte-yr7pgh"),$(i,"class","svelte-yr7pgh"),k(i,"active","kill"===e[3]),$(a,"class","svelte-yr7pgh"),k(a,"active","check"===e[3]),$(s,"class","switchKillCheck svelte-yr7pgh"),_(l,"display","flex"),$(l,"class","svelte-yr7pgh")},m(h,g){u(h,t,g),u(h,n,g),u(h,l,g),d(l,s),d(s,i),d(s,r),d(s,a),u(h,o,g),P.m(h,g),u(h,c,g),v||(p=w(s,"click",e[18]),v=!0)},p(e,t){8&t[0]&&k(i,"active","kill"===e[3]),8&t[0]&&k(a,"active","check"===e[3]),x===(x=b(e))&&P?P.p(e,t):(P.d(1),P=x(e),P&&(P.c(),P.m(c.parentNode,c)))},d(e){e&&h(t),e&&h(n),e&&h(l),e&&h(o),P.d(e),e&&h(c),v=!1,p()}}}function Xe(e){let t,n=e[6],l=[];for(let t=0;t<n.length;t+=1)l[t]=tt(Re(e,n,t));return{c(){t=g("div");for(let e=0;e<l.length;e+=1)l[e].c();$(t,"class","playerList svelte-yr7pgh")},m(e,n){u(e,t,n);for(let e=0;e<l.length;e+=1)l[e].m(t,null)},p(e,s){if(16448&s[0]){let i;for(n=e[6],i=0;i<n.length;i+=1){const r=Re(e,n,i);l[i]?l[i].p(r,s):(l[i]=tt(r),l[i].c(),l[i].m(t,null))}for(;i<l.length;i+=1)l[i].d(1);l.length=n.length}},d(e){e&&h(t),v(l,e)}}}function et(e){let t;function n(e,t){return e[2].dead?lt:nt}let l=n(e),s=l(e);return{c(){s.c(),t=y()},m(e,n){s.m(e,n),u(e,t,n)},p(e,i){l===(l=n(e))&&s?s.p(e,i):(s.d(1),s=l(e),s&&(s.c(),s.m(t.parentNode,t)))},d(e){s.d(e),e&&h(t)}}}function tt(e){let t,n,l,s,r,a,o,c,v,p,y,b,_,P,L,H,F,S=e[28].vote+"",C=e[28].name+"",z=e[28].id+"";return{c(){t=g("div"),n=g("div"),l=g("div"),s=m(),r=g("div"),a=f(S),o=m(),c=g("div"),v=g("div"),p=f(C),y=m(),b=g("div"),_=f("Player "),P=f(z),L=m(),$(l,"class","avatar svelte-yr7pgh"),$(r,"class","showVote svelte-yr7pgh"),$(n,"class","containerAvatar svelte-yr7pgh"),$(v,"class","playerName svelte-yr7pgh"),$(b,"class","playerId svelte-yr7pgh"),$(c,"class","svelte-yr7pgh"),$(t,"class","player svelte-yr7pgh"),k(t,"dead",e[28].dead)},m(h,g){u(h,t,g),d(t,n),d(n,l),d(n,s),d(n,r),d(r,a),d(t,o),d(t,c),d(c,v),d(v,p),d(c,y),d(c,b),d(b,_),d(b,P),d(t,L),H||(F=w(t,"click",(function(){i(e[14](e[28]))&&e[14](e[28]).apply(this,arguments)})),H=!0)},p(n,l){e=n,64&l[0]&&S!==(S=e[28].vote+"")&&x(a,S),64&l[0]&&C!==(C=e[28].name+"")&&x(p,C),64&l[0]&&z!==(z=e[28].id+"")&&x(P,z),64&l[0]&&k(t,"dead",e[28].dead)},d(e){e&&h(t),H=!1,F()}}}function nt(e){let t,n,l,s,i=e[2].name+"",r=e[10](e[2].role)+"";return{c(){t=f("Вы проверили "),n=f(i),l=f(", он "),s=f(r)},m(e,i){u(e,t,i),u(e,n,i),u(e,l,i),u(e,s,i)},p(e,t){4&t[0]&&i!==(i=e[2].name+"")&&x(n,i),4&t[0]&&r!==(r=e[10](e[2].role)+"")&&x(s,r)},d(e){e&&h(t),e&&h(n),e&&h(l),e&&h(s)}}}function lt(e){let t,n,l,s,i=e[2].name+"",r=e[10](e[2].role)+"";return{c(){t=f("Вы убили "),n=f(i),l=f(", он был "),s=f(r)},m(e,i){u(e,t,i),u(e,n,i),u(e,l,i),u(e,s,i)},p(e,t){4&t[0]&&i!==(i=e[2].name+"")&&x(n,i),4&t[0]&&r!==(r=e[10](e[2].role)+"")&&x(s,r)},d(e){e&&h(t),e&&h(n),e&&h(l),e&&h(s)}}}function st(e){let t,n,l=e[2]&&it(e),s=e[1]&&ot(e);return{c(){t=g("div"),l&&l.c(),n=m(),s&&s.c(),$(t,"class","svelte-yr7pgh")},m(e,i){u(e,t,i),l&&l.m(t,null),d(t,n),s&&s.m(t,null)},p(e,i){e[2]?l?l.p(e,i):(l=it(e),l.c(),l.m(t,n)):l&&(l.d(1),l=null),e[1]?s?s.p(e,i):(s=ot(e),s.c(),s.m(t,null)):s&&(s.d(1),s=null)},d(e){e&&h(t),l&&l.d(),s&&s.d()}}}function it(e){let t;function n(e,t){return e[2].dead?at:rt}let l=n(e),s=l(e);return{c(){t=g("div"),s.c(),$(t,"class","svelte-yr7pgh")},m(e,n){u(e,t,n),s.m(t,null)},p(e,i){l===(l=n(e))&&s?s.p(e,i):(s.d(1),s=l(e),s&&(s.c(),s.m(t,null)))},d(e){e&&h(t),s.d()}}}function rt(t){let n;return{c(){n=f("Комисар кого то проверил...")},m(e,t){u(e,n,t)},p:e,d(e){e&&h(n)}}}function at(e){let t,n,l,s,i,r=e[2].name+"",a=e[10](e[2].role)+"";return{c(){t=g("div"),n=f("Комисар убил "),l=f(r),s=f(" Он был  "),i=f(a),$(t,"class","svelte-yr7pgh")},m(e,r){u(e,t,r),d(t,n),d(t,l),d(t,s),d(t,i)},p(e,t){4&t[0]&&r!==(r=e[2].name+"")&&x(l,r),4&t[0]&&a!==(a=e[10](e[2].role)+"")&&x(i,a)},d(e){e&&h(t)}}}function ot(e){let t,n,l,s,i,r=e[1].name+"",a=e[10](e[1].role)+"";return{c(){t=g("div"),n=f("Дон убил "),l=f(r),s=f(" Он был  "),i=f(a),$(t,"class","svelte-yr7pgh")},m(e,r){u(e,t,r),d(t,n),d(t,l),d(t,s),d(t,i)},p(e,t){2&t[0]&&r!==(r=e[1].name+"")&&x(l,r),2&t[0]&&a!==(a=e[10](e[1].role)+"")&&x(i,a)},d(e){e&&h(t)}}}function ct(e){let t,n;function l(e,t){return(null==n||64&t[0])&&(n=!!e[6].filter(vt).filter(gt).length),n?ut:dt}let s=l(e,[-1]),i=s(e);return{c(){t=g("div"),i.c(),$(t,"class","svelte-yr7pgh")},m(e,n){u(e,t,n),i.m(t,null)},p(e,n){s!==(s=l(e,n))&&(i.d(1),i=s(e),i&&(i.c(),i.m(t,null)))},d(e){e&&h(t),i.d()}}}function dt(e){let t;return{c(){t=f("Мирные жители победили")},m(e,n){u(e,t,n)},d(e){e&&h(t)}}}function ut(e){let t;return{c(){t=f("Мафия победила")},m(e,n){u(e,t,n)},d(e){e&&h(t)}}}function ht(t){let n,l,s,i,r,a,o,c,v,p,y,w,b,k,P,L,H,F,S,C,z,A,B,I,R=t[10](t[7]?t[7].role:"")+"",N=t[7]&&t[7].dead?"мертвый":"живой",M=t[11](t[9])+"",V="init"===t[0].state&&Ve(),T="day_to_night"===t[0].state&&Te(t),E="night_to_day"===t[0].state&&Ee(t),W="day_vote"===t[0].state&&We(t),j="day_final_vote"===t[0].state&&De(t),D="day_final_vote_skip"===t[0].state&&Oe(),O="day_vote_result"===t[0].state&&Ye(t),Y="night"===t[0].state&&Ke(t),Z="night_result"===t[0].state&&st(t),G="end"===t[0].state&&ct(t);return{c(){n=g("div"),l=g("div"),s=f("Ваша роль: "),i=f(R),r=m(),a=g("div"),o=f("Статус: "),c=f(N),v=m(),p=g("div"),y=m(),V&&V.c(),w=m(),b=g("div"),k=f("Осталось: "),P=f(M),L=m(),T&&T.c(),H=m(),E&&E.c(),F=m(),W&&W.c(),S=m(),j&&j.c(),C=m(),D&&D.c(),z=m(),O&&O.c(),A=m(),Y&&Y.c(),B=m(),Z&&Z.c(),I=m(),G&&G.c(),$(l,"class","svelte-yr7pgh"),$(a,"class","svelte-yr7pgh"),_(p,"height","20px"),$(p,"class","svelte-yr7pgh"),$(b,"class","svelte-yr7pgh"),$(n,"class","container svelte-yr7pgh")},m(e,t){u(e,n,t),d(n,l),d(l,s),d(l,i),d(n,r),d(n,a),d(a,o),d(a,c),d(n,v),d(n,p),d(n,y),V&&V.m(n,null),d(n,w),d(n,b),d(b,k),d(b,P),d(n,L),T&&T.m(n,null),d(n,H),E&&E.m(n,null),d(n,F),W&&W.m(n,null),d(n,S),j&&j.m(n,null),d(n,C),D&&D.m(n,null),d(n,z),O&&O.m(n,null),d(n,A),Y&&Y.m(n,null),d(n,B),Z&&Z.m(n,null),d(n,I),G&&G.m(n,null)},p(e,t){128&t[0]&&R!==(R=e[10](e[7]?e[7].role:"")+"")&&x(i,R),128&t[0]&&N!==(N=e[7]&&e[7].dead?"мертвый":"живой")&&x(c,N),"init"===e[0].state?V||(V=Ve(),V.c(),V.m(n,w)):V&&(V.d(1),V=null),512&t[0]&&M!==(M=e[11](e[9])+"")&&x(P,M),"day_to_night"===e[0].state?T?T.p(e,t):(T=Te(e),T.c(),T.m(n,H)):T&&(T.d(1),T=null),"night_to_day"===e[0].state?E?E.p(e,t):(E=Ee(e),E.c(),E.m(n,F)):E&&(E.d(1),E=null),"day_vote"===e[0].state?W?W.p(e,t):(W=We(e),W.c(),W.m(n,S)):W&&(W.d(1),W=null),"day_final_vote"===e[0].state?j?j.p(e,t):(j=De(e),j.c(),j.m(n,C)):j&&(j.d(1),j=null),"day_final_vote_skip"===e[0].state?D||(D=Oe(),D.c(),D.m(n,z)):D&&(D.d(1),D=null),"day_vote_result"===e[0].state?O?O.p(e,t):(O=Ye(e),O.c(),O.m(n,A)):O&&(O.d(1),O=null),"night"===e[0].state?Y?Y.p(e,t):(Y=Ke(e),Y.c(),Y.m(n,B)):Y&&(Y.d(1),Y=null),"night_result"===e[0].state?Z?Z.p(e,t):(Z=st(e),Z.c(),Z.m(n,I)):Z&&(Z.d(1),Z=null),"end"===e[0].state?G?G.p(e,t):(G=ct(e),G.c(),G.m(n,null)):G&&(G.d(1),G=null)},i:e,o:e,d(e){e&&h(n),V&&V.d(),T&&T.d(),E&&E.d(),W&&W.d(),j&&j.d(),D&&D.d(),O&&O.d(),Y&&Y.d(),Z&&Z.d(),G&&G.d()}}}const vt=e=>"don"===e.role,gt=e=>!e.dead;function pt(e,t,n){let l,s="init";s="day-to-night",s="night",s="day";let i,r,a=null,o=null,c="kill";const d=()=>({voteHangedPlayers:new Set,voteHangedFinalYesPlayers:new Set,voteHangedFinalNoPlayers:new Set,killedPlayers:new Set,checkPlayers:new Set,dead:!1});class u{constructor(e){Object.assign(this,e),this.comCheckPlayers=new Set}getAlivePlayers(e=[this]){return v.filter((e=>!e.dead)).filter((t=>!e.includes(t)))}getAliveRndPlayer(e=[this]){const t=this.getAlivePlayers(e);return t[Math.random()*t.length|0]}tick(){if(!this.dead)switch(l.state){case"day_vote":if(Math.random()>.3)break;this.dayVotePlayer=this.getAliveRndPlayer(),this.dayVotePlayer&&l.vote(this,this.dayVotePlayer);break;case"day_final_vote":g===this.dayVotePlayer&&l.vote(this,1);break;case"night":if("peaceful"===this.role)break;if("don"===this.role){const e=this.getAliveRndPlayer();e&&l.kill(this,e);break}if("commissioner"===this.role){const e=[...this.comCheckPlayers],t=this.getAliveRndPlayer([...e,this]),s=e.find((e=>"don"===e.role));if(s){console.log("com kill "+s.name),n(3,c="kill"),l.commissionerAction(this,s);break}console.log("com check "+t.name),n(3,c="check"),l.commissionerAction(this,t),o&&this.comCheckPlayers.add(o);break}}}}let h,v=[];setTimeout((function(){const e=["Lupusregina[beta]","pacificescape","Alex Kovalev","bakunov","Den ri","js - one love","𝖁𝖑𝖆𝖉"];n(6,v=[]),v.push(n(7,h={id:e.length,name:"*SELF*",vote:0,voteFinal:0,bote:!1,...d()})),v.push(...e.map(((e,t)=>new u({id:t,name:e,vote:0,voteFinal:0,bot:!0,...d()}))));const t=e=>{const t=v.filter((e=>!e.role)),n=t[Math.random()*t.length|0];return!!n&&(n.role=e,!0)};for(t("don"),t("commissioner");t("peaceful"););p("night"),n(6,v),n(7,h),globalThis.players=v,globalThis.selfPlayer=h}));let g=null;const p=e=>{n(0,l=m[e]),l.begin(),v.filter((e=>e.bot)).map((e=>e.tick()))},f=e=>v.find((e=>"don"===e.role)).dead||v.filter((e=>!e.dead)).length<=2?p("end"):void p(e),m={day_vote:{begin(){n(9,y=5)},end(){const e=v.sort(((e,t)=>t.voteHangedPlayers.size-e.voteHangedPlayers.size)).filter((e=>e.voteHangedPlayers.size));!e.length||e.length>1&&e[0].voteHangedPlayers.size===e[1].voteHangedPlayers.size?p("day_final_vote_skip"):(n(8,g=e[0]),p("day_final_vote"))},vote(e,t){e.dead||t.dead||e!==t&&(t.voteHangedPlayers.has(e)?t.voteHangedPlayers.delete(e):(v.map((t=>t.voteHangedPlayers.delete(e))),t.voteHangedPlayers.add(e)),n(6,v))}},day_final_vote:{begin(){n(9,y=5)},end(){const e=g.voteHangedFinalYesPlayers.size-g.voteHangedFinalNoPlayers.size;if(!e)return p("day_final_vote_skip");e>0&&n(8,g.dead=!0,g),p("day_vote_result")},vote(e,t){if(e.dead)return;if(e===g)return;const l=(e,t)=>{e.has(t)?e.delete(t):([g.voteHangedFinalYesPlayers,g.voteHangedFinalNoPlayers].map((e=>e.delete(t))),e.add(t))};l(t>0?g.voteHangedFinalYesPlayers:g.voteHangedFinalNoPlayers,e),n(6,v),n(8,g)}},day_final_vote_skip:{begin(){n(9,y=5)},end(){p("day_to_night")}},day_vote_result:{begin(){n(9,y=5)},end(){f("day_to_night")}},day_to_night:{begin(){n(9,y=2)},end(){p("night")}},night:{begin(){n(9,y=5)},end(){p("night_to_day")},kill(e,t){e.dead||t.dead||e!==t&&(a||"don"===e.role&&(t.dead||(t.dead=!0,e.killedPlayers.add(t),n(1,a=t),n(6,v))))},commissionerAction(e,t){if(!(e.dead||t.dead||e===t||"commissioner"!==e.role||t.dead||o)){if("kill"===c)t.dead=!0,e.killedPlayers.add(t);else{if(e.checkPlayers.has(t))return;e.checkPlayers.add(t)}n(2,o=t),n(6,v)}}},night_to_day:{begin(){n(9,y=2)},end(){p("night_result")}},night_result:{begin(){n(9,y=5)},end(){n(2,o=null),n(1,a=null),f("day_vote")}},end:{begin(){n(9,y=3600)},end(){}}};Object.entries(m).map((e=>e[1].state=e[0])),l=m.day_vote;let y=200;setInterval((()=>{n(9,y--,y),0===y&&l.end()}),1e3);globalThis.ss=e=>s=e,globalThis.players=v;return e.$$.update=()=>{16&e.$$.dirty[0]&&i&&i.play(),32&e.$$.dirty[0]&&r&&r.play()},[l,a,o,c,i,r,v,h,g,y,e=>({don:"Дон мафии",peaceful:"Мирный житель",commissioner:"Комисар"}[e]),e=>`${e/60|0}:${String(e%60).padStart(2,"0")}`,e=>t=>{l.vote(h,e)},e=>t=>{l.kill(h,e)},e=>t=>{l.commissionerAction(h,e)},e=>t=>{l.vote(h,e)},function(e){F[e?"unshift":"push"]((()=>{i=e,n(4,i)}))},function(e){F[e?"unshift":"push"]((()=>{r=e,n(5,r)}))},()=>n(3,c=["kill","check"].find((e=>e!==c)))]}class ft extends J{constructor(e){super(),U(this,e,pt,ht,r,{},[-1,-1])}}function mt(e){let t,n,l,s,i,r,a,o,c;i=new ne({});var v=e[0];return v&&(o=new v({})),{c(){t=g("main"),n=g("div"),l=m(),s=g("div"),G(i.$$.fragment),r=m(),a=g("div"),o&&G(o.$$.fragment),$(n,"class","background svelte-188k38y"),$(s,"class","headerWrapper"),$(a,"class","content svelte-188k38y")},m(e,h){u(e,t,h),d(t,n),d(t,l),d(t,s),K(i,s,null),d(t,r),d(t,a),o&&K(o,a,null),c=!0},p(e,[t]){if(v!==(v=e[0])){if(o){j();const e=o;Y(e.$$.fragment,1,0,(()=>{q(e,1)})),D()}v?(o=new v({}),G(o.$$.fragment),O(o.$$.fragment,1),K(o,a,null)):o=null}},i(e){c||(O(i.$$.fragment,e),o&&O(o.$$.fragment,e),c=!0)},o(e){Y(i.$$.fragment,e),o&&Y(o.$$.fragment,e),c=!1},d(e){e&&h(t),q(i),o&&q(o)}}}function yt(e,t,n){let l;X.add(/^\/$/,(()=>n(0,l=ve))),X.add(/^\/game-rules$/,(()=>n(0,l=He))),X.add(/^\/current-games$/,(()=>n(0,l=Ie))),X.add(/^\/game$/,(()=>n(0,l=ft))),X.setNotFound((()=>n(0,l=ve))),window.addEventListener("popstate",(()=>X.goWithoutPushState(location.pathname))),X.fromPath(),window.router=X;const s=new class{constructor(e,t){this.elStyle=document.createElement("style"),this.elStyle.type="text/css",this.elStyle.innerText=e,this.attached=!1,t&&t((()=>this.detach))}update(e){this.elStyle.innerText=e}attach(){this.attached||(this.attached=!0,(document.head||document.body).appendChild(this.elStyle))}detach(){this.attached&&(this.attached=!1,this.elStyle.parentNode.removeChild(this.elStyle))}}("");s.attach();const i=()=>{let e=window.innerWidth/1920,t=window.innerHeight/1080;s.update(`\n\t\t:root {\n\t\t\t--widthRate : ${e};\n\t\t\t--heightRate: ${t};\n\t\t\t--devicePixelRatio: ${devicePixelRatio};\n\t\t}\n\t\thtml {\n\t\t\tfont-size: ${e}px;\n\t\t}\n\t`)};return window.addEventListener("resize",i),i(),[l]}return new class extends J{constructor(e){super(),U(this,e,yt,mt,r,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
