var app=function(){"use strict";function e(){}function t(e,t){for(const n in t)e[n]=t[n];return e}function n(e){return e()}function l(){return Object.create(null)}function s(e){e.forEach(n)}function i(e){return"function"==typeof e}function a(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function r(t,n,l){t.$$.on_destroy.push(function(t,...n){if(null==t)return e;const l=t.subscribe(...n);return l.unsubscribe?()=>l.unsubscribe():l}(n,l))}function o(e){const t={};for(const n in e)"$"!==n[0]&&(t[n]=e[n]);return t}function d(e,t){const n={};t=new Set(t);for(const l in e)t.has(l)||"$"===l[0]||(n[l]=e[l]);return n}function c(e,t){e.appendChild(t)}function u(e,t,n){e.insertBefore(t,n||null)}function v(e){e.parentNode.removeChild(e)}function h(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function f(e){return document.createElement(e)}function g(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function m(e){return document.createTextNode(e)}function p(){return m(" ")}function y(){return m("")}function w(e,t,n,l){return e.addEventListener(t,n,l),()=>e.removeEventListener(t,n,l)}function $(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function b(e,t){for(const n in t)$(e,n,t[n])}function x(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function _(e,t,n,l){e.style.setProperty(t,n,l?"important":"")}function j(e,t,n){e.classList[n?"add":"remove"](t)}let k;function P(e){k=e}const L=[],H=[],F=[],S=[],C=Promise.resolve();let z=!1;function A(){z||(z=!0,C.then(M))}function B(){return A(),C}function I(e){F.push(e)}let R=!1;const N=new Set;function M(){if(!R){R=!0;do{for(let e=0;e<L.length;e+=1){const t=L[e];P(t),V(t.$$)}for(P(null),L.length=0;H.length;)H.pop()();for(let e=0;e<F.length;e+=1){const t=F[e];N.has(t)||(N.add(t),t())}F.length=0}while(L.length);for(;S.length;)S.pop()();z=!1,R=!1,N.clear()}}function V(e){if(null!==e.fragment){e.update(),s(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(I)}}const T=new Set;let E;function W(){E={r:0,c:[],p:E}}function D(){E.r||s(E.c),E=E.p}function O(e,t){e&&e.i&&(T.delete(e),e.i(t))}function Y(e,t,n,l){if(e&&e.o){if(T.has(e))return;T.add(e),E.c.push((()=>{T.delete(e),l&&(n&&e.d(1),l())})),e.o(t)}}function Z(e,t){const n={},l={},s={$$scope:1};let i=e.length;for(;i--;){const a=e[i],r=t[i];if(r){for(const e in a)e in r||(l[e]=1);for(const e in r)s[e]||(n[e]=r[e],s[e]=1);e[i]=r}else for(const e in a)s[e]=1}for(const e in l)e in n||(n[e]=void 0);return n}function G(e){e&&e.c()}function K(e,t,l){const{fragment:a,on_mount:r,on_destroy:o,after_update:d}=e.$$;a&&a.m(t,l),I((()=>{const t=r.map(n).filter(i);o?o.push(...t):s(t),e.$$.on_mount=[]})),d.forEach(I)}function q(e,t){const n=e.$$;null!==n.fragment&&(s(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function U(t,n,i,a,r,o,d=[-1]){const c=k;P(t);const u=n.props||{},h=t.$$={fragment:null,ctx:null,props:o,update:e,not_equal:r,bound:l(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(c?c.$$.context:[]),callbacks:l(),dirty:d,skip_bound:!1};let f=!1;if(h.ctx=i?i(t,u,((e,n,...l)=>{const s=l.length?l[0]:n;return h.ctx&&r(h.ctx[e],h.ctx[e]=s)&&(!h.skip_bound&&h.bound[e]&&h.bound[e](s),f&&function(e,t){-1===e.$$.dirty[0]&&(L.push(e),A(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}(t,e)),n})):[],h.update(),f=!0,s(h.before_update),h.fragment=!!a&&a(h.ctx),n.target){if(n.hydrate){const e=function(e){return Array.from(e.childNodes)}(n.target);h.fragment&&h.fragment.l(e),e.forEach(v)}else h.fragment&&h.fragment.c();n.intro&&O(t.$$.fragment),K(t,n.target,n.anchor),M()}P(c)}class J{$destroy(){q(this,1),this.$destroy=e}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Q=[];const X=new class{constructor(){this.notfoundCallback=()=>{},this.routers=[],this.pathInfoWritable=function(t,n=e){let l;const s=[];function i(e){if(a(t,e)&&(t=e,l)){const e=!Q.length;for(let e=0;e<s.length;e+=1){const n=s[e];n[1](),Q.push(n,t)}if(e){for(let e=0;e<Q.length;e+=2)Q[e][0](Q[e+1]);Q.length=0}}}return{set:i,update:function(e){i(e(t))},subscribe:function(a,r=e){const o=[a,r];return s.push(o),1===s.length&&(l=n(i)||e),a(t),()=>{const e=s.indexOf(o);-1!==e&&s.splice(e,1),0===s.length&&(l(),l=null)}}}}(this.path),this.rule=null,this.path=null,this.pathInfo=null,this._setPath("")}getPath(){return this.pathInfo}getPathWritable(){return this.pathInfoWritable}setNotFound(e){this.notfoundCallback=e}add(e,t){this.routers.push({regexp:e,callback:t})}_setPath(e){this.rule=e;this.pathInfo={rule:e,path:e,parts:[]},this.pathInfoWritable.set(this.pathInfo)}async go(e,t=!0){if(this.rule===e)return;const n=this.routers.find((t=>t.regexp.test(e)));if(!n)return this.notfoundCallback();if(this._setPath(e),console.log(e),t){const t=new URLSearchParams(location.search);t.set("rule",e),location.pathname,t.toString(),location.hash,history.pushState({},"",location.pathname+"?"+t.toString()+location.hash)}await B(),n.callback()}goWithoutPushState(e){return this.go(e,!1)}fromPath(){const e=new URLSearchParams(location.search);this.goWithoutPushState(e.get("rule"))}};function ee(t){let n,l,i,a,r,o,d,h,g,m,y;return{c(){n=f("div"),l=f("div"),i=f("div"),i.textContent="Правила игры",a=p(),r=f("div"),r.textContent="Посмотреть игру",o=p(),d=f("div"),d.textContent="Контакты",h=p(),g=f("div"),g.innerHTML='<div class="a text_underline svelte-16wvx70">Регистрация</div> \n\t\t<div class="a text_underline svelte-16wvx70">Забыли пароль</div>',$(i,"class","a svelte-16wvx70"),j(i,"aActive","/game-rules"===t[0].path),$(r,"class","a svelte-16wvx70"),j(r,"aActive","/current-games"===t[0].path),$(d,"class","a svelte-16wvx70"),$(l,"class","flex cgap30 svelte-16wvx70"),$(g,"class","flex cgap30 svelte-16wvx70"),$(n,"class","container flex svelte-16wvx70")},m(e,s){u(e,n,s),c(n,l),c(l,i),c(l,a),c(l,r),c(l,o),c(l,d),c(n,h),c(n,g),m||(y=[w(i,"click",t[2]),w(r,"click",t[3])],m=!0)},p(e,[t]){1&t&&j(i,"aActive","/game-rules"===e[0].path),1&t&&j(r,"aActive","/current-games"===e[0].path)},i:e,o:e,d(e){e&&v(n),m=!1,s(y)}}}function te(e,t,n){let l;const{pathInfoWritable:s}=X;r(e,s,(e=>n(0,l=e)));return[l,s,()=>X.go("/game-rules"),()=>X.go("/current-games")]}class ne extends J{constructor(e){super(),U(this,e,te,ee,a,{})}}function le(n){let l,s,i=[{width:"14"},{height:"14"},{viewBox:"0 0 14 14"},{xmlns:"http://www.w3.org/2000/svg"},{fill:"black"},n[0]],a={};for(let e=0;e<i.length;e+=1)a=t(a,i[e]);return{c(){l=g("svg"),s=g("path"),$(s,"fill-rule","evenodd"),$(s,"clip-rule","evenodd"),$(s,"d","M14 8H8V14H6V8H0V6H6V0H8V6H14V8Z"),b(l,a)},m(e,t){u(e,l,t),c(l,s)},p(e,[t]){b(l,a=Z(i,[{width:"14"},{height:"14"},{viewBox:"0 0 14 14"},{xmlns:"http://www.w3.org/2000/svg"},{fill:"black"},1&t&&e[0]]))},i:e,o:e,d(e){e&&v(l)}}}function se(e,n,l){const s=[];let i=d(n,s);return e.$$set=e=>{n=t(t({},n),o(e)),l(0,i=d(n,s))},[i]}class ie extends J{constructor(e){super(),U(this,e,se,le,a,{})}}function ae(n){let l,s,i=[{width:"23"},{height:"23"},{viewBox:"0 0 23 23"},{fill:"#FF0000"},{xmlns:"http://www.w3.org/2000/svg"},n[0]],a={};for(let e=0;e<i.length;e+=1)a=t(a,i[e]);return{c(){l=g("svg"),s=g("path"),$(s,"d","M13.6433 9.2217H23V13.0189H13.6433V23H9.35671V13.0189H0V9.2217H9.35671V0H13.6433V9.2217Z"),b(l,a)},m(e,t){u(e,l,t),c(l,s)},p(e,[t]){b(l,a=Z(i,[{width:"23"},{height:"23"},{viewBox:"0 0 23 23"},{fill:"#FF0000"},{xmlns:"http://www.w3.org/2000/svg"},1&t&&e[0]]))},i:e,o:e,d(e){e&&v(l)}}}function re(e,n,l){const s=[];let i=d(n,s);return e.$$set=e=>{n=t(t({},n),o(e)),l(0,i=d(n,s))},[i]}class oe extends J{constructor(e){super(),U(this,e,re,ae,a,{})}}function de(n){let l,s,i=[{width:"33"},{height:"33"},{viewBox:"0 0 33 33"},{xmlns:"http://www.w3.org/2000/svg"},{fill:"#979797"},n[0]],a={};for(let e=0;e<i.length;e+=1)a=t(a,i[e]);return{c(){l=g("svg"),s=g("path"),$(s,"d","M16.0806 13.1412L22.5213 6.35413L25.2757 8.96793L18.835 15.755L26.075 22.6256L23.1243 25.735L15.8843 18.8644L9.44355 25.6515L6.68918 23.0377L13.1299 16.2506L6.44074 9.90282L9.39142 6.79345L16.0806 13.1412Z"),b(l,a)},m(e,t){u(e,l,t),c(l,s)},p(e,[t]){b(l,a=Z(i,[{width:"33"},{height:"33"},{viewBox:"0 0 33 33"},{xmlns:"http://www.w3.org/2000/svg"},{fill:"#979797"},1&t&&e[0]]))},i:e,o:e,d(e){e&&v(l)}}}function ce(e,n,l){const s=[];let i=d(n,s);return e.$$set=e=>{n=t(t({},n),o(e)),l(0,i=d(n,s))},[i]}class ue extends J{constructor(e){super(),U(this,e,ce,de,a,{})}}function ve(t){let n,l,s;return{c(){n=f("div"),l=p(),s=f("div"),s.innerHTML='<div class="logoGroup svelte-17ve99s"><div class="mafiaLabel svelte-17ve99s">MAFIA</div> \n\t\t<div class="onlineLabel svelte-17ve99s">online</div> \n\t\t<div style="height: 139rem;"></div> \n\t\t<button class="signinBtn svelte-17ve99s">ВОЙТИ</button></div>',$(n,"class","background svelte-17ve99s"),$(s,"class","container svelte-17ve99s")},m(e,t){u(e,n,t),u(e,l,t),u(e,s,t)},p:e,i:e,o:e,d(e){e&&v(n),e&&v(l),e&&v(s)}}}class he extends J{constructor(e){super(),U(this,e,null,ve,a,{})}}function fe(n){let l,s,i=[{width:"8"},{height:"12"},{viewBox:"0 0 8 12"},{xmlns:"http://www.w3.org/2000/svg"},{fill:"#979797"},n[0]],a={};for(let e=0;e<i.length;e+=1)a=t(a,i[e]);return{c(){l=g("svg"),s=g("path"),$(s,"fill-rule","evenodd"),$(s,"clip-rule","evenodd"),$(s,"d","M7.41 1.41L6 0L0 6L6 12L7.41 10.59L2.83 6L7.41 1.41Z"),b(l,a)},m(e,t){u(e,l,t),c(l,s)},p(e,[t]){b(l,a=Z(i,[{width:"8"},{height:"12"},{viewBox:"0 0 8 12"},{xmlns:"http://www.w3.org/2000/svg"},{fill:"#979797"},1&t&&e[0]]))},i:e,o:e,d(e){e&&v(l)}}}function ge(e,n,l){const s=[];let i=d(n,s);return e.$$set=e=>{n=t(t({},n),o(e)),l(0,i=d(n,s))},[i]}class me extends J{constructor(e){super(),U(this,e,ge,fe,a,{})}}function pe(n){let l,s,i=[{width:"8"},{height:"12"},{viewBox:"0 0 8 12"},{xmlns:"http://www.w3.org/2000/svg"},{fill:"#979797"},n[0]],a={};for(let e=0;e<i.length;e+=1)a=t(a,i[e]);return{c(){l=g("svg"),s=g("path"),$(s,"fill-rule","evenodd"),$(s,"clip-rule","evenodd"),$(s,"d","M1.99984 0L0.589844 1.41L5.16984 6L0.589844 10.59L1.99984 12L7.99984 6L1.99984 0Z"),b(l,a)},m(e,t){u(e,l,t),c(l,s)},p(e,[t]){b(l,a=Z(i,[{width:"8"},{height:"12"},{viewBox:"0 0 8 12"},{xmlns:"http://www.w3.org/2000/svg"},{fill:"#979797"},1&t&&e[0]]))},i:e,o:e,d(e){e&&v(l)}}}function ye(e,n,l){const s=[];let i=d(n,s);return e.$$set=e=>{n=t(t({},n),o(e)),l(0,i=d(n,s))},[i]}class we extends J{constructor(e){super(),U(this,e,ye,pe,a,{})}}let $e="undefined"!=typeof ResizeObserver;const be=new Set;window.addEventListener("resize",(()=>{for(const e of be.values())e()}));const xe=(e,t)=>{if($e){const n=new ResizeObserver((n=>t(e.getBoundingClientRect())));return n.observe(e),{destroy:()=>n.disconnect()}}const n=["x","y","height","width"];let l={};const s=()=>{const s=e.getBoundingClientRect();n.some((e=>l[e]!==s[e]))&&t(s),l=s};s(),be.add(s);const i=setInterval(s,100);return{destroy(){clearInterval(i),be.delete(s)}}};function _e(e,t,n){const l=e.slice();return l[14]=t[n],l[16]=n,l}function je(t){let n,l,s,i,a,r,o,d=t[14].title+"",h=t[14].description+"";return{c(){n=f("div"),l=f("div"),s=m(d),i=p(),a=f("div"),r=m(h),o=p(),$(l,"class","gameRuleTitle svelte-zwn93r"),$(a,"class","gameRuleDescription svelte-zwn93r"),$(n,"class","gameRule")},m(e,t){u(e,n,t),c(n,l),c(l,s),c(n,i),c(n,a),c(a,r),c(n,o)},p:e,d(e){e&&v(n)}}}function ke(t){let n,l,a,r,o,d,g,m,y,b,x,j,k,P,L,H,F,S,C,z,A,B,I=t[7],R=[];for(let e=0;e<I.length;e+=1)R[e]=je(_e(t,I,e));return H=new me({props:{style:"width: 7px; height: 12px;",fill:t[4]?"#FFF":"#979797"}}),C=new we({props:{style:"width: 7px; height: 12px;",fill:t[3]?"#FFF":"#979797"}}),{c(){n=f("div"),l=f("div"),a=f("div"),a.textContent="Правила",r=p(),o=f("div"),d=p(),g=f("div"),m=f("div");for(let e=0;e<R.length;e+=1)R[e].c();b=p(),x=f("div"),j=p(),k=f("div"),P=f("div"),L=f("div"),G(H.$$.fragment),F=p(),S=f("div"),G(C.$$.fragment),$(a,"class","gameRuleLabel svelte-zwn93r"),_(o,"height","64rem"),$(m,"class","gameRulesWrapper svelte-zwn93r"),_(m,"transform","translate3d(0px, "+t[0]+"px, 0)"),$(g,"class","gameRules svelte-zwn93r"),_(x,"height","40rem"),$(L,"class","arrowBtn svelte-zwn93r"),$(S,"class","arrowBtn svelte-zwn93r"),$(P,"class","control svelte-zwn93r"),$(k,"class","containerControl svelte-zwn93r"),$(l,"class","content svelte-zwn93r"),$(n,"class","body svelte-zwn93r")},m(s,v){u(s,n,v),c(n,l),c(l,a),c(l,r),c(l,o),c(l,d),c(l,g),c(g,m);for(let e=0;e<R.length;e+=1)R[e].m(m,null);var h;t[8](m),t[9](g),c(l,b),c(l,x),c(l,j),c(l,k),c(k,P),c(P,L),K(H,L,null),c(P,F),c(P,S),K(C,S,null),z=!0,A||(B=[(h=y=xe.call(null,g,t[5]),h&&i(h.destroy)?h.destroy:e),w(L,"click",t[6](-1)),w(S,"click",t[6](1))],A=!0)},p(e,[t]){if(128&t){let n;for(I=e[7],n=0;n<I.length;n+=1){const l=_e(e,I,n);R[n]?R[n].p(l,t):(R[n]=je(l),R[n].c(),R[n].m(m,null))}for(;n<R.length;n+=1)R[n].d(1);R.length=I.length}(!z||1&t)&&_(m,"transform","translate3d(0px, "+e[0]+"px, 0)");const n={};16&t&&(n.fill=e[4]?"#FFF":"#979797"),H.$set(n);const l={};8&t&&(l.fill=e[3]?"#FFF":"#979797"),C.$set(l)},i(e){z||(O(H.$$.fragment,e),O(C.$$.fragment,e),z=!0)},o(e){Y(H.$$.fragment,e),Y(C.$$.fragment,e),z=!1},d(e){e&&v(n),h(R,e),t[8](null),t[9](null),q(H),q(C),A=!1,s(B)}}}function Pe(e,t,n){let l,s,i=0,a=0,r=[],o=0;function d(){const{y:e,height:t}=l.getBoundingClientRect(),u=[...s.querySelectorAll(".gameRule")];if(u.length!==c.length)return B().then(d);r=c.map(((t,n)=>{const{y:l,height:s}=u[n].getBoundingClientRect();return r[n]={y:l-i-e,height:s,el:u[n]}})),n(12,o=Math.max(0,Math.min(r.length-1,o))),n(0,i=-r[o].y),n(10,a=0),r.map((e=>{e.el.style.visibility="";const l=e.y+i;l<0||l+e.height>t?e.el.style.visibility="hidden":n(10,a++,a)})),console.log(r,a)}const c=[{title:"Как общаться с другими игроками?",description:"Если нажать на чей-то ник, то можно написать сообщение, адресованное именно ему, но доступное для чтения всем остальным присутствующим на улице. Если нажать на конверт, то сообщение будет приватным и окажется видным только Вам и адресату."},{title:"Как начать игру?",description:"На главной странице можно создать партию самому, нажав кнопку «Создать». Либо же присоединиться к уже созданной заявке, нажав на красный крест справа от заявки. Игра начинается с того момента, когда наберётся указанное максимальное количество игроков, либо же истечёт время ожидания, а игроков в заявке будет 7 или более."},{title:"Какие роли есть в игре?",description:"После начала партии случайным образом происходит распределение ролей. Выбор ролей ограничивается тремя: комиссар, мафия и честный человек."},{title:"Как проходит игра?",description:"\nПервые две минуты игры уходят на то, чтоб мафия могла обсудить план действий. Далее игра приобретает циклический характер:\nДень:\n   — Голосование, выбор посадки (днём честные жители, во время обсуждения, пытаются вычислить, кто в игре — мафия, и путём голосования выбирают, кого посадить в тюрьму)\nНочь:\n   — Ход комиссара (комиссар может проверить любого игрока и узнать его настоящую роль, а ночью мафия убивает честных жителей)\n   — Ход мафии (чтобы убить честного жителя, мафия должна консолидированно проголосовать за одного и того же игрока)\nИгра продолжается до тех пор, пока в городе не останутся только честные жители или мафиози."},{title:"Комиссар (ком, шериф)",description:"Комиссар в свой ход может узнать роль любого другого игрока. А затем известить о своей проверке всех остальных. Если комиссар оказывается под угрозой посадки, то он должен огласить свою роль. Комиссар играет за честных жителей."},{title:"Честный человек (чиж, мир)",description:"Знает только свою роль. Должен помнить, что в игре есть комиссар, словам которого можно доверять."},{title:"Мафия",description:"Мафия видит свою роль и роль напарника. В первые две минуты у них есть возможность обсудить план на игру с помощью приватных сообщений. Ночью для убийства необходимо, чтоб каждый мафиози выбрал одну и ту же жертву."},{title:"Задача в игре",description:"Для мафии — убить всех честных жителей, для честных жителей — посадить всю мафию в тюрьму. Игра продолжается до тех пор, пока в городе не останутся только честные жители или мафиози.\nЭто очень краткие правила игры в мафию, но их вполне хватит для понимания процесса игры."}];let u,v;return e.$$.update=()=>{4096&e.$$.dirty&&n(4,u=o>0),5120&e.$$.dirty&&n(3,v=o+a<c.length)},[i,l,s,v,u,function(){d()},e=>t=>{const{height:s}=l.getBoundingClientRect(),i=r.slice(0,o).reverse();let c=0,h=0;for(;c<i.length&&h<s;c++)h+=i[c].height;e>0&&v?n(12,o+=a):e<0&&u&&n(12,o-=c),B().then(d)},c,function(e){H[e?"unshift":"push"]((()=>{s=e,n(2,s)}))},function(e){H[e?"unshift":"push"]((()=>{l=e,n(1,l)}))}]}class Le extends J{constructor(e){super(),U(this,e,Pe,ke,a,{})}}function He(e,t,n){const l=e.slice();return l[3]=t[n],l}function Fe(e){let t,n;return t=new oe({props:{style:"width: 23rem; height: 23rem;"}}),{c(){G(t.$$.fragment)},m(e,l){K(t,e,l),n=!0},i(e){n||(O(t.$$.fragment,e),n=!0)},o(e){Y(t.$$.fragment,e),n=!1},d(e){q(t,e)}}}function Se(e){let t,n;return t=new ue({props:{style:"width: 35rem; height: 35rem;"}}),{c(){G(t.$$.fragment)},m(e,l){K(t,e,l),n=!0},i(e){n||(O(t.$$.fragment,e),n=!0)},o(e){Y(t.$$.fragment,e),n=!1},d(e){q(t,e)}}}function Ce(t){let n,l,s,i,a,r,o,d,h,g,y,w,b,x,j,k,P,L,H,F,S,C,z,A,B,I,R,N,M,V,T,E,W=t[0](t[3].date)+"",D=t[3].id+"",Z=t[3].maxNumPlayers+"",G=t[3].maxNumPlayers-t[3].players.length+"",K=t[3].players.join(", ")+"";const q=[Se,Fe],U=[];return S=function(e,t){return e[3].hasSelf?0:1}(t),C=U[S]=q[S](t),{c(){n=f("div"),l=f("div"),s=f("div"),i=f("div"),a=m(W),r=p(),o=f("div"),d=m("№"),h=m(D),g=p(),y=f("div"),w=m("Макс. игроков: "),b=m(Z),x=p(),j=f("div"),k=m("Ожидает "),P=m(G),L=m(" участников\r\n\t\t\t\t\t\t"),H=f("div"),F=p(),C.c(),z=p(),A=f("div"),B=f("div"),I=p(),R=f("div"),N=p(),M=f("div"),V=m(K),T=p(),$(s,"class","gameItemInfoLabel svelte-97b8u7"),_(H,"width","23rem"),$(j,"class","gameItemInfoAction svelte-97b8u7"),$(l,"class","gameItemInfo svelte-97b8u7"),$(B,"class","gameItemProgressTrack svelte-97b8u7"),$(R,"class","gameItemProgressThumb svelte-97b8u7"),_(R,"width",t[3].players.length/t[3].maxNumPlayers*100+"%"),$(A,"class","gameItemProgress svelte-97b8u7"),$(M,"class","gameItemPlayers svelte-97b8u7"),$(n,"class","gameItem svelte-97b8u7")},m(e,t){u(e,n,t),c(n,l),c(l,s),c(s,i),c(i,a),c(s,r),c(s,o),c(o,d),c(o,h),c(s,g),c(s,y),c(y,w),c(y,b),c(l,x),c(l,j),c(j,k),c(j,P),c(j,L),c(j,H),c(j,F),U[S].m(j,null),c(n,z),c(n,A),c(A,B),c(A,I),c(A,R),c(n,N),c(n,M),c(M,V),c(n,T),E=!0},p:e,i(e){E||(O(C),E=!0)},o(e){Y(C),E=!1},d(e){e&&v(n),U[S].d()}}}function ze(e){let t,n,l,s,i,a,r,o,d,g,y,w,b,x,j,k;a=new ie({props:{style:"width: 14px; height: 14px;"}});let P=e[1],L=[];for(let t=0;t<P.length;t+=1)L[t]=Ce(He(e,P,t));const H=e=>Y(L[e],1,1,(()=>{L[e]=null}));return{c(){t=f("div"),n=f("div"),l=f("div"),l.textContent="Текущие игры",s=p(),i=f("button"),G(a.$$.fragment),r=m("создать"),o=p(),d=f("div"),g=p(),y=f("div"),w=p(),b=f("div"),x=p(),j=f("div");for(let e=0;e<L.length;e+=1)L[e].c();$(l,"class","currentGamesLabel svelte-97b8u7"),$(i,"class","createGameButton svelte-97b8u7"),$(n,"class","header svelte-97b8u7"),_(d,"height","17rem"),_(y,"background","#FFFFFF"),_(y,"mix-blend-mode","normal"),_(y,"opacity","0.12"),_(y,"width","100%"),_(y,"height","1px"),_(b,"height","31rem"),$(j,"class","gameList svelte-97b8u7"),$(t,"class","container svelte-97b8u7")},m(e,v){u(e,t,v),c(t,n),c(n,l),c(n,s),c(n,i),K(a,i,null),c(i,r),c(t,o),c(t,d),c(t,g),c(t,y),c(t,w),c(t,b),c(t,x),c(t,j);for(let e=0;e<L.length;e+=1)L[e].m(j,null);k=!0},p(e,[t]){if(3&t){let n;for(P=e[1],n=0;n<P.length;n+=1){const l=He(e,P,n);L[n]?(L[n].p(l,t),O(L[n],1)):(L[n]=Ce(l),L[n].c(),O(L[n],1),L[n].m(j,null))}for(W(),n=P.length;n<L.length;n+=1)H(n);D()}},i(e){if(!k){O(a.$$.fragment,e);for(let e=0;e<P.length;e+=1)O(L[e]);k=!0}},o(e){Y(a.$$.fragment,e),L=L.filter(Boolean);for(let e=0;e<L.length;e+=1)Y(L[e]);k=!1},d(e){e&&v(t),q(a),h(L,e)}}}function Ae(e){const t=()=>Date.now()-(1e6*Math.random()|0);let n=[{date:t(),id:35487,maxNumPlayers:11,players:["Lupusregina[beta]","Den Ri","Зомби Ich bin Roboter","Bunk Bunkovich","Aleksander irreligious86","Chingiz Mam"]},{date:t(),id:35488,maxNumPlayers:11,players:["Зомби Ich bin Roboter"]},{date:t(),id:35489,maxNumPlayers:9,players:["Bunk Bunkovich","Aleksander irreligious86"]},{date:t(),id:35490,maxNumPlayers:11,players:["Lupusregina[beta]","Den Ri","Зомби Ich bin Roboter","Bunk Bunkovich","Aleksander irreligious86","Chingiz Mam"],hasSelf:!0}];for(let e=0;e<10;e++)n.push(n[Math.random()*n.length|0]);return[e=>{const t=new Date(e),n=e=>(e+"").padStart(2,0);return[t.getDay()+1,t.getMonth(),n(t.getFullYear()%2e3)].map(n).join(".")+" "+[t.getHours(),t.getMinutes(),t.getSeconds()].map(n).join(":")},n]}class Be extends J{constructor(e){super(),U(this,e,Ae,ze,a,{})}}function Ie(e,t,n){const l=e.slice();return l[28]=t[n],l}function Re(e,t,n){const l=e.slice();return l[28]=t[n],l}function Ne(e,t,n){const l=e.slice();return l[28]=t[n],l}function Me(e){let t,n,l;return{c(){t=f("div"),t.textContent="Ожидается начало игры",n=p(),l=f("div"),l.innerHTML='<div class="svelte-6j8nd6">Список игроков:</div> \n\t\t<div class="playerList svelte-6j8nd6"><div class="svelte-6j8nd6">Lupusregina[beta]</div> \n\t\t\t<div class="svelte-6j8nd6">pacificescape</div> \n\t\t\t<div class="svelte-6j8nd6">Alex Kovalev</div> \n\t\t\t<div class="svelte-6j8nd6">bakunov</div> \n\t\t\t<div class="svelte-6j8nd6">Den ri</div></div>',$(t,"class","svelte-6j8nd6"),$(l,"class","svelte-6j8nd6")},m(e,s){u(e,t,s),u(e,n,s),u(e,l,s)},d(e){e&&v(t),e&&v(n),e&&v(l)}}}function Ve(t){let n,l;return{c(){n=f("video"),n.src!==(l="assets/witch.mp4")&&$(n,"src","assets/witch.mp4"),$(n,"class","svelte-6j8nd6")},m(e,l){u(e,n,l),t[16](n)},p:e,d(e){e&&v(n),t[16](null)}}}function Te(t){let n,l;return{c(){n=f("video"),n.src!==(l="assets/sunrise.mp4")&&$(n,"src","assets/sunrise.mp4"),$(n,"class","svelte-6j8nd6")},m(e,l){u(e,n,l),t[17](n)},p:e,d(e){e&&v(n),t[17](null)}}}function Ee(e){let t,n,l,s,i=e[6],a=[];for(let t=0;t<i.length;t+=1)a[t]=We(Ne(e,i,t));return{c(){t=f("div"),n=f("div"),n.textContent="Кого будем вешать:",l=p(),s=f("div");for(let e=0;e<a.length;e+=1)a[e].c();$(n,"class","svelte-6j8nd6"),$(s,"class","playerList svelte-6j8nd6"),$(t,"class","svelte-6j8nd6")},m(e,i){u(e,t,i),c(t,n),c(t,l),c(t,s);for(let e=0;e<a.length;e+=1)a[e].m(s,null)},p(e,t){if(4160&t[0]){let n;for(i=e[6],n=0;n<i.length;n+=1){const l=Ne(e,i,n);a[n]?a[n].p(l,t):(a[n]=We(l),a[n].c(),a[n].m(s,null))}for(;n<a.length;n+=1)a[n].d(1);a.length=i.length}},d(e){e&&v(t),h(a,e)}}}function We(e){let t,n,l,s,a,r,o,d,h,g,y,b,_,k,P,L,H,F=e[28].voteHangedPlayers.size+"",S=e[28].name+"",C=e[28].id+"";return{c(){t=f("div"),n=f("div"),l=f("div"),s=p(),a=f("div"),r=m(F),o=p(),d=f("div"),h=f("div"),g=m(S),y=p(),b=f("div"),_=m("Player "),k=m(C),P=p(),$(l,"class","avatar svelte-6j8nd6"),$(a,"class","showVote svelte-6j8nd6"),$(n,"class","containerAvatar svelte-6j8nd6"),$(h,"class","playerName svelte-6j8nd6"),$(b,"class","playerId svelte-6j8nd6"),$(d,"class","svelte-6j8nd6"),$(t,"class","player svelte-6j8nd6"),j(t,"dead",e[28].dead)},m(v,f){u(v,t,f),c(t,n),c(n,l),c(n,s),c(n,a),c(a,r),c(t,o),c(t,d),c(d,h),c(h,g),c(d,y),c(d,b),c(b,_),c(b,k),c(t,P),L||(H=w(t,"click",(function(){i(e[12](e[28]))&&e[12](e[28]).apply(this,arguments)})),L=!0)},p(n,l){e=n,64&l[0]&&F!==(F=e[28].voteHangedPlayers.size+"")&&x(r,F),64&l[0]&&S!==(S=e[28].name+"")&&x(g,S),64&l[0]&&C!==(C=e[28].id+"")&&x(k,C),64&l[0]&&j(t,"dead",e[28].dead)},d(e){e&&v(t),L=!1,H()}}}function De(e){let t,n,l,i,a,r,o,d,h,g,y,b,k,P,L,H,F,S,C,z,A,B,I,R,N,M,V,T,E=e[8].voteHangedFinalYesPlayers.size+"",W=e[8].voteHangedFinalNoPlayers.size+"",D=e[8].name+"",O=e[8].id+"";return{c(){t=f("div"),n=f("div"),n.textContent="Точно хотите повесить:",l=p(),i=f("div"),a=f("div"),r=f("div"),o=p(),d=f("div"),h=m(E),g=m("/"),y=m(W),b=p(),k=f("div"),P=f("div"),L=m(D),H=p(),F=f("div"),S=m("Player "),C=m(O),z=p(),A=f("div"),B=p(),I=f("div"),R=f("div"),R.textContent="Yes",N=p(),M=f("div"),M.textContent="No",$(n,"class","svelte-6j8nd6"),$(r,"class","avatar svelte-6j8nd6"),$(d,"class","showVote svelte-6j8nd6"),$(a,"class","containerAvatar svelte-6j8nd6"),$(P,"class","playerName svelte-6j8nd6"),$(F,"class","playerId svelte-6j8nd6"),$(k,"class","svelte-6j8nd6"),$(i,"class","player svelte-6j8nd6"),j(i,"dead",e[8].dead),_(A,"height","10px"),$(A,"class","svelte-6j8nd6"),$(R,"class","voteBtn svelte-6j8nd6"),$(M,"class","voteBtn svelte-6j8nd6"),$(I,"class","voteBtnGroup svelte-6j8nd6"),$(t,"class","svelte-6j8nd6")},m(s,v){u(s,t,v),c(t,n),c(t,l),c(t,i),c(i,a),c(a,r),c(a,o),c(a,d),c(d,h),c(d,g),c(d,y),c(i,b),c(i,k),c(k,P),c(P,L),c(k,H),c(k,F),c(F,S),c(F,C),c(t,z),c(t,A),c(t,B),c(t,I),c(I,R),c(I,N),c(I,M),V||(T=[w(R,"click",e[15](1)),w(M,"click",e[15](-1))],V=!0)},p(e,t){256&t[0]&&E!==(E=e[8].voteHangedFinalYesPlayers.size+"")&&x(h,E),256&t[0]&&W!==(W=e[8].voteHangedFinalNoPlayers.size+"")&&x(y,W),256&t[0]&&D!==(D=e[8].name+"")&&x(L,D),256&t[0]&&O!==(O=e[8].id+"")&&x(C,O),256&t[0]&&j(i,"dead",e[8].dead)},d(e){e&&v(t),V=!1,s(T)}}}function Oe(e){let t;return{c(){t=f("div"),t.innerHTML='<div class="svelte-6j8nd6">Жители не смогли договорится и разошлись</div>',$(t,"class","svelte-6j8nd6")},m(e,n){u(e,t,n)},d(e){e&&v(t)}}}function Ye(e){let t;function n(e,t){return e[8].dead?Ge:Ze}let l=n(e),s=l(e);return{c(){t=f("div"),s.c(),$(t,"class","svelte-6j8nd6")},m(e,n){u(e,t,n),s.m(t,null)},p(e,i){l===(l=n(e))&&s?s.p(e,i):(s.d(1),s=l(e),s&&(s.c(),s.m(t,null)))},d(e){e&&v(t),s.d()}}}function Ze(e){let t,n,l,s,i=e[8].name+"";return{c(){t=f("div"),n=m("Игрок "),l=m(i),s=m(" был оправдан"),$(t,"class","svelte-6j8nd6")},m(e,i){u(e,t,i),c(t,n),c(t,l),c(t,s)},p(e,t){256&t[0]&&i!==(i=e[8].name+"")&&x(l,i)},d(e){e&&v(t)}}}function Ge(e){let t,n,l,s,i,a=e[8].name+"",r=e[10](e[8].role)+"";return{c(){t=f("div"),n=m("Игрок "),l=m(a),s=m(" был повешен, он был "),i=m(r),$(t,"class","svelte-6j8nd6")},m(e,a){u(e,t,a),c(t,n),c(t,l),c(t,s),c(t,i)},p(e,t){256&t[0]&&a!==(a=e[8].name+"")&&x(l,a),256&t[0]&&r!==(r=e[10](e[8].role)+"")&&x(i,r)},d(e){e&&v(t)}}}function Ke(e){let t,n,l,s="peaceful"===e[7].role&&qe(),i="don"===e[7].role&&Ue(e),a="commissioner"===e[7].role&&Qe(e);return{c(){t=f("div"),s&&s.c(),n=p(),i&&i.c(),l=p(),a&&a.c(),$(t,"class","svelte-6j8nd6")},m(e,r){u(e,t,r),s&&s.m(t,null),c(t,n),i&&i.m(t,null),c(t,l),a&&a.m(t,null)},p(e,r){"peaceful"===e[7].role?s||(s=qe(),s.c(),s.m(t,n)):s&&(s.d(1),s=null),"don"===e[7].role?i?i.p(e,r):(i=Ue(e),i.c(),i.m(t,l)):i&&(i.d(1),i=null),"commissioner"===e[7].role?a?a.p(e,r):(a=Qe(e),a.c(),a.m(t,null)):a&&(a.d(1),a=null)},d(e){e&&v(t),s&&s.d(),i&&i.d(),a&&a.d()}}}function qe(e){let t;return{c(){t=m("Вы отдыхаете и ждете дня")},m(e,n){u(e,t,n)},d(e){e&&v(t)}}}function Ue(e){let t,n,l,s=e[6],i=[];for(let t=0;t<s.length;t+=1)i[t]=Je(Re(e,s,t));return{c(){t=f("div"),t.textContent="Кого будем убивать:",n=p(),l=f("div");for(let e=0;e<i.length;e+=1)i[e].c();$(t,"class","svelte-6j8nd6"),$(l,"class","playerList svelte-6j8nd6")},m(e,s){u(e,t,s),u(e,n,s),u(e,l,s);for(let e=0;e<i.length;e+=1)i[e].m(l,null)},p(e,t){if(8256&t[0]){let n;for(s=e[6],n=0;n<s.length;n+=1){const a=Re(e,s,n);i[n]?i[n].p(a,t):(i[n]=Je(a),i[n].c(),i[n].m(l,null))}for(;n<i.length;n+=1)i[n].d(1);i.length=s.length}},d(e){e&&v(t),e&&v(n),e&&v(l),h(i,e)}}}function Je(e){let t,n,l,s,a,r,o,d,h,g,y,b,_,k,P,L,H,F=e[28].vote+"",S=e[28].name+"",C=e[28].id+"";return{c(){t=f("div"),n=f("div"),l=f("div"),s=p(),a=f("div"),r=m(F),o=p(),d=f("div"),h=f("div"),g=m(S),y=p(),b=f("div"),_=m("Player "),k=m(C),P=p(),$(l,"class","avatar svelte-6j8nd6"),$(a,"class","showVote svelte-6j8nd6"),$(n,"class","containerAvatar svelte-6j8nd6"),$(h,"class","playerName svelte-6j8nd6"),$(b,"class","playerId svelte-6j8nd6"),$(d,"class","svelte-6j8nd6"),$(t,"class","player svelte-6j8nd6"),j(t,"dead",e[28].dead)},m(v,f){u(v,t,f),c(t,n),c(n,l),c(n,s),c(n,a),c(a,r),c(t,o),c(t,d),c(d,h),c(h,g),c(d,y),c(d,b),c(b,_),c(b,k),c(t,P),L||(H=w(t,"click",(function(){i(e[13](e[28]))&&e[13](e[28]).apply(this,arguments)})),L=!0)},p(n,l){e=n,64&l[0]&&F!==(F=e[28].vote+"")&&x(r,F),64&l[0]&&S!==(S=e[28].name+"")&&x(g,S),64&l[0]&&C!==(C=e[28].id+"")&&x(k,C),64&l[0]&&j(t,"dead",e[28].dead)},d(e){e&&v(t),L=!1,H()}}}function Qe(e){let t,n,l,s,i,a,r,o,d,h,g;function b(e,t){return e[2]?et:Xe}let x=b(e),k=x(e);return{c(){t=f("div"),t.textContent="Кого будем проверять/убивать:",n=p(),l=f("div"),s=f("div"),i=f("div"),i.textContent="Убить",a=m("\r\n\t\t\t\t\t/\r\n\t\t\t\t\t"),r=f("div"),r.textContent="Проверить",o=p(),k.c(),d=y(),$(t,"class","svelte-6j8nd6"),$(i,"class","svelte-6j8nd6"),j(i,"active","kill"===e[3]),$(r,"class","svelte-6j8nd6"),j(r,"active","check"===e[3]),$(s,"class","switchKillCheck svelte-6j8nd6"),_(l,"display","flex"),$(l,"class","svelte-6j8nd6")},m(v,f){u(v,t,f),u(v,n,f),u(v,l,f),c(l,s),c(s,i),c(s,a),c(s,r),u(v,o,f),k.m(v,f),u(v,d,f),h||(g=w(s,"click",e[18]),h=!0)},p(e,t){8&t[0]&&j(i,"active","kill"===e[3]),8&t[0]&&j(r,"active","check"===e[3]),x===(x=b(e))&&k?k.p(e,t):(k.d(1),k=x(e),k&&(k.c(),k.m(d.parentNode,d)))},d(e){e&&v(t),e&&v(n),e&&v(l),e&&v(o),k.d(e),e&&v(d),h=!1,g()}}}function Xe(e){let t,n=e[6],l=[];for(let t=0;t<n.length;t+=1)l[t]=tt(Ie(e,n,t));return{c(){t=f("div");for(let e=0;e<l.length;e+=1)l[e].c();$(t,"class","playerList svelte-6j8nd6")},m(e,n){u(e,t,n);for(let e=0;e<l.length;e+=1)l[e].m(t,null)},p(e,s){if(16448&s[0]){let i;for(n=e[6],i=0;i<n.length;i+=1){const a=Ie(e,n,i);l[i]?l[i].p(a,s):(l[i]=tt(a),l[i].c(),l[i].m(t,null))}for(;i<l.length;i+=1)l[i].d(1);l.length=n.length}},d(e){e&&v(t),h(l,e)}}}function et(e){let t;function n(e,t){return e[2].dead?lt:nt}let l=n(e),s=l(e);return{c(){s.c(),t=y()},m(e,n){s.m(e,n),u(e,t,n)},p(e,i){l===(l=n(e))&&s?s.p(e,i):(s.d(1),s=l(e),s&&(s.c(),s.m(t.parentNode,t)))},d(e){s.d(e),e&&v(t)}}}function tt(e){let t,n,l,s,a,r,o,d,h,g,y,b,_,k,P,L,H,F=e[28].vote+"",S=e[28].name+"",C=e[28].id+"";return{c(){t=f("div"),n=f("div"),l=f("div"),s=p(),a=f("div"),r=m(F),o=p(),d=f("div"),h=f("div"),g=m(S),y=p(),b=f("div"),_=m("Player "),k=m(C),P=p(),$(l,"class","avatar svelte-6j8nd6"),$(a,"class","showVote svelte-6j8nd6"),$(n,"class","containerAvatar svelte-6j8nd6"),$(h,"class","playerName svelte-6j8nd6"),$(b,"class","playerId svelte-6j8nd6"),$(d,"class","svelte-6j8nd6"),$(t,"class","player svelte-6j8nd6"),j(t,"dead",e[28].dead)},m(v,f){u(v,t,f),c(t,n),c(n,l),c(n,s),c(n,a),c(a,r),c(t,o),c(t,d),c(d,h),c(h,g),c(d,y),c(d,b),c(b,_),c(b,k),c(t,P),L||(H=w(t,"click",(function(){i(e[14](e[28]))&&e[14](e[28]).apply(this,arguments)})),L=!0)},p(n,l){e=n,64&l[0]&&F!==(F=e[28].vote+"")&&x(r,F),64&l[0]&&S!==(S=e[28].name+"")&&x(g,S),64&l[0]&&C!==(C=e[28].id+"")&&x(k,C),64&l[0]&&j(t,"dead",e[28].dead)},d(e){e&&v(t),L=!1,H()}}}function nt(e){let t,n,l,s,i=e[2].name+"",a=e[10](e[2].role)+"";return{c(){t=m("Вы проверили "),n=m(i),l=m(", он "),s=m(a)},m(e,i){u(e,t,i),u(e,n,i),u(e,l,i),u(e,s,i)},p(e,t){4&t[0]&&i!==(i=e[2].name+"")&&x(n,i),4&t[0]&&a!==(a=e[10](e[2].role)+"")&&x(s,a)},d(e){e&&v(t),e&&v(n),e&&v(l),e&&v(s)}}}function lt(e){let t,n,l,s,i=e[2].name+"",a=e[10](e[2].role)+"";return{c(){t=m("Вы убили "),n=m(i),l=m(", он был "),s=m(a)},m(e,i){u(e,t,i),u(e,n,i),u(e,l,i),u(e,s,i)},p(e,t){4&t[0]&&i!==(i=e[2].name+"")&&x(n,i),4&t[0]&&a!==(a=e[10](e[2].role)+"")&&x(s,a)},d(e){e&&v(t),e&&v(n),e&&v(l),e&&v(s)}}}function st(e){let t,n,l=e[2]&&it(e),s=e[1]&&ot(e);return{c(){t=f("div"),l&&l.c(),n=p(),s&&s.c(),$(t,"class","svelte-6j8nd6")},m(e,i){u(e,t,i),l&&l.m(t,null),c(t,n),s&&s.m(t,null)},p(e,i){e[2]?l?l.p(e,i):(l=it(e),l.c(),l.m(t,n)):l&&(l.d(1),l=null),e[1]?s?s.p(e,i):(s=ot(e),s.c(),s.m(t,null)):s&&(s.d(1),s=null)},d(e){e&&v(t),l&&l.d(),s&&s.d()}}}function it(e){let t;function n(e,t){return e[2].dead?rt:at}let l=n(e),s=l(e);return{c(){t=f("div"),s.c(),$(t,"class","svelte-6j8nd6")},m(e,n){u(e,t,n),s.m(t,null)},p(e,i){l===(l=n(e))&&s?s.p(e,i):(s.d(1),s=l(e),s&&(s.c(),s.m(t,null)))},d(e){e&&v(t),s.d()}}}function at(t){let n;return{c(){n=m("Комисар кого то проверил...")},m(e,t){u(e,n,t)},p:e,d(e){e&&v(n)}}}function rt(e){let t,n,l,s,i,a=e[2].name+"",r=e[10](e[2].role)+"";return{c(){t=f("div"),n=m("Комисар убил "),l=m(a),s=m(" Он был  "),i=m(r),$(t,"class","svelte-6j8nd6")},m(e,a){u(e,t,a),c(t,n),c(t,l),c(t,s),c(t,i)},p(e,t){4&t[0]&&a!==(a=e[2].name+"")&&x(l,a),4&t[0]&&r!==(r=e[10](e[2].role)+"")&&x(i,r)},d(e){e&&v(t)}}}function ot(e){let t,n,l,s,i,a=e[1].name+"",r=e[10](e[1].role)+"";return{c(){t=f("div"),n=m("Дон убил "),l=m(a),s=m(" Он был  "),i=m(r),$(t,"class","svelte-6j8nd6")},m(e,a){u(e,t,a),c(t,n),c(t,l),c(t,s),c(t,i)},p(e,t){2&t[0]&&a!==(a=e[1].name+"")&&x(l,a),2&t[0]&&r!==(r=e[10](e[1].role)+"")&&x(i,r)},d(e){e&&v(t)}}}function dt(e){let t,n;function l(e,t){return(null==n||64&t[0])&&(n=!!e[6].filter(ht).filter(ft).length),n?ut:ct}let s=l(e,[-1]),i=s(e);return{c(){t=f("div"),i.c(),$(t,"class","svelte-6j8nd6")},m(e,n){u(e,t,n),i.m(t,null)},p(e,n){s!==(s=l(e,n))&&(i.d(1),i=s(e),i&&(i.c(),i.m(t,null)))},d(e){e&&v(t),i.d()}}}function ct(e){let t;return{c(){t=m("Мирные жители победили")},m(e,n){u(e,t,n)},d(e){e&&v(t)}}}function ut(e){let t;return{c(){t=m("Мафия победила")},m(e,n){u(e,t,n)},d(e){e&&v(t)}}}function vt(t){let n,l,s,i,a,r,o,d,h,g,y,w,b,j,k,P,L,H,F,S,C,z,A,B,I=t[10](t[7]?t[7].role:"")+"",R=t[7]&&t[7].dead?"мертвый":"живой",N=t[11](t[9])+"",M="init"===t[0].state&&Me(),V="day_to_night"===t[0].state&&Ve(t),T="night_to_day"===t[0].state&&Te(t),E="day_vote"===t[0].state&&Ee(t),W="day_final_vote"===t[0].state&&De(t),D="day_final_vote_skip"===t[0].state&&Oe(),O="day_vote_result"===t[0].state&&Ye(t),Y="night"===t[0].state&&Ke(t),Z="night_result"===t[0].state&&st(t),G="end"===t[0].state&&dt(t);return{c(){n=f("div"),l=f("div"),s=m("Ваша роль: "),i=m(I),a=p(),r=f("div"),o=m("Статус: "),d=m(R),h=p(),g=f("div"),y=p(),M&&M.c(),w=p(),b=f("div"),j=m("Осталось: "),k=m(N),P=p(),V&&V.c(),L=p(),T&&T.c(),H=p(),E&&E.c(),F=p(),W&&W.c(),S=p(),D&&D.c(),C=p(),O&&O.c(),z=p(),Y&&Y.c(),A=p(),Z&&Z.c(),B=p(),G&&G.c(),$(l,"class","svelte-6j8nd6"),$(r,"class","svelte-6j8nd6"),_(g,"height","20px"),$(g,"class","svelte-6j8nd6"),$(b,"class","svelte-6j8nd6"),$(n,"class","container svelte-6j8nd6")},m(e,t){u(e,n,t),c(n,l),c(l,s),c(l,i),c(n,a),c(n,r),c(r,o),c(r,d),c(n,h),c(n,g),c(n,y),M&&M.m(n,null),c(n,w),c(n,b),c(b,j),c(b,k),c(n,P),V&&V.m(n,null),c(n,L),T&&T.m(n,null),c(n,H),E&&E.m(n,null),c(n,F),W&&W.m(n,null),c(n,S),D&&D.m(n,null),c(n,C),O&&O.m(n,null),c(n,z),Y&&Y.m(n,null),c(n,A),Z&&Z.m(n,null),c(n,B),G&&G.m(n,null)},p(e,t){128&t[0]&&I!==(I=e[10](e[7]?e[7].role:"")+"")&&x(i,I),128&t[0]&&R!==(R=e[7]&&e[7].dead?"мертвый":"живой")&&x(d,R),"init"===e[0].state?M||(M=Me(),M.c(),M.m(n,w)):M&&(M.d(1),M=null),512&t[0]&&N!==(N=e[11](e[9])+"")&&x(k,N),"day_to_night"===e[0].state?V?V.p(e,t):(V=Ve(e),V.c(),V.m(n,L)):V&&(V.d(1),V=null),"night_to_day"===e[0].state?T?T.p(e,t):(T=Te(e),T.c(),T.m(n,H)):T&&(T.d(1),T=null),"day_vote"===e[0].state?E?E.p(e,t):(E=Ee(e),E.c(),E.m(n,F)):E&&(E.d(1),E=null),"day_final_vote"===e[0].state?W?W.p(e,t):(W=De(e),W.c(),W.m(n,S)):W&&(W.d(1),W=null),"day_final_vote_skip"===e[0].state?D||(D=Oe(),D.c(),D.m(n,C)):D&&(D.d(1),D=null),"day_vote_result"===e[0].state?O?O.p(e,t):(O=Ye(e),O.c(),O.m(n,z)):O&&(O.d(1),O=null),"night"===e[0].state?Y?Y.p(e,t):(Y=Ke(e),Y.c(),Y.m(n,A)):Y&&(Y.d(1),Y=null),"night_result"===e[0].state?Z?Z.p(e,t):(Z=st(e),Z.c(),Z.m(n,B)):Z&&(Z.d(1),Z=null),"end"===e[0].state?G?G.p(e,t):(G=dt(e),G.c(),G.m(n,null)):G&&(G.d(1),G=null)},i:e,o:e,d(e){e&&v(n),M&&M.d(),V&&V.d(),T&&T.d(),E&&E.d(),W&&W.d(),D&&D.d(),O&&O.d(),Y&&Y.d(),Z&&Z.d(),G&&G.d()}}}const ht=e=>"don"===e.role,ft=e=>!e.dead;function gt(e,t,n){let l,s="init";s="day-to-night",s="night",s="day";let i,a,r=null,o=null,d="kill";const c=()=>({voteHangedPlayers:new Set,voteHangedFinalYesPlayers:new Set,voteHangedFinalNoPlayers:new Set,killedPlayers:new Set,checkPlayers:new Set,dead:!1});class u{constructor(e){Object.assign(this,e),this.comCheckPlayers=new Set}getAlivePlayers(e=[this]){return h.filter((e=>!e.dead)).filter((t=>!e.includes(t)))}getAliveRndPlayer(e=[this]){const t=this.getAlivePlayers(e);return t[Math.random()*t.length|0]}tick(){if(!this.dead)switch(l.state){case"day_vote":if(Math.random()>.3)break;this.dayVotePlayer=this.getAliveRndPlayer(),this.dayVotePlayer&&l.vote(this,this.dayVotePlayer);break;case"day_final_vote":f===this.dayVotePlayer&&l.vote(this,1);break;case"night":if("peaceful"===this.role)break;if("don"===this.role){const e=this.getAliveRndPlayer();e&&l.kill(this,e);break}if("commissioner"===this.role){const e=[...this.comCheckPlayers],t=this.getAliveRndPlayer([...e,this]),s=e.find((e=>"don"===e.role));if(s){console.log("com kill "+s.name),n(3,d="kill"),l.commissionerAction(this,s);break}console.log("com check "+t.name),n(3,d="check"),l.commissionerAction(this,t),o&&this.comCheckPlayers.add(o);break}}}}let v,h=[];setTimeout((function(){const e=["Lupusregina[beta]","pacificescape","Alex Kovalev","bakunov","Den ri","js - one love","𝖁𝖑𝖆𝖉"];n(6,h=[]),h.push(n(7,v={id:e.length,name:"*SELF*",vote:0,voteFinal:0,bote:!1,...c()})),h.push(...e.map(((e,t)=>new u({id:t,name:e,vote:0,voteFinal:0,bot:!0,...c()}))));const t=e=>{const t=h.filter((e=>!e.role)),n=t[Math.random()*t.length|0];return!!n&&(n.role=e,!0)};for(t("don"),t("commissioner");t("peaceful"););g("night"),n(6,h),n(7,v),globalThis.players=h,globalThis.selfPlayer=v}));let f=null;const g=e=>{n(0,l=p[e]),l.begin(),h.filter((e=>e.bot)).map((e=>e.tick()))},m=e=>h.find((e=>"don"===e.role)).dead||h.filter((e=>!e.dead)).length<=2?g("end"):void g(e),p={day_vote:{begin(){n(9,y=5)},end(){const e=h.sort(((e,t)=>t.voteHangedPlayers.size-e.voteHangedPlayers.size)).filter((e=>e.voteHangedPlayers.size));!e.length||e.length>1&&e[0].voteHangedPlayers.size===e[1].voteHangedPlayers.size?g("day_final_vote_skip"):(n(8,f=e[0]),g("day_final_vote"))},vote(e,t){e.dead||t.dead||e!==t&&(t.voteHangedPlayers.has(e)?t.voteHangedPlayers.delete(e):(h.map((t=>t.voteHangedPlayers.delete(e))),t.voteHangedPlayers.add(e)),n(6,h))}},day_final_vote:{begin(){n(9,y=5)},end(){const e=f.voteHangedFinalYesPlayers.size-f.voteHangedFinalNoPlayers.size;if(!e)return g("day_final_vote_skip");e>0&&n(8,f.dead=!0,f),g("day_vote_result")},vote(e,t){if(e.dead)return;if(e===f)return;const l=(e,t)=>{e.has(t)?e.delete(t):([f.voteHangedFinalYesPlayers,f.voteHangedFinalNoPlayers].map((e=>e.delete(t))),e.add(t))};l(t>0?f.voteHangedFinalYesPlayers:f.voteHangedFinalNoPlayers,e),n(6,h),n(8,f)}},day_final_vote_skip:{begin(){n(9,y=5)},end(){g("day_to_night")}},day_vote_result:{begin(){n(9,y=5)},end(){m("day_to_night")}},day_to_night:{begin(){n(9,y=2)},end(){g("night")}},night:{begin(){n(9,y=5)},end(){g("night_to_day")},kill(e,t){e.dead||t.dead||e!==t&&(r||"don"===e.role&&(t.dead||(t.dead=!0,e.killedPlayers.add(t),n(1,r=t),n(6,h))))},commissionerAction(e,t){if(!(e.dead||t.dead||e===t||"commissioner"!==e.role||t.dead||o)){if("kill"===d)t.dead=!0,e.killedPlayers.add(t);else{if(e.checkPlayers.has(t))return;e.checkPlayers.add(t)}n(2,o=t),n(6,h)}}},night_to_day:{begin(){n(9,y=2)},end(){g("night_result")}},night_result:{begin(){n(9,y=5)},end(){n(2,o=null),n(1,r=null),m("day_vote")}},end:{begin(){n(9,y=3600)},end(){}}};Object.entries(p).map((e=>e[1].state=e[0])),l=p.day_vote;let y=200;setInterval((()=>{n(9,y--,y),0===y&&l.end()}),1e3);globalThis.ss=e=>s=e,globalThis.players=h;return e.$$.update=()=>{16&e.$$.dirty[0]&&i&&i.play(),32&e.$$.dirty[0]&&a&&a.play()},[l,r,o,d,i,a,h,v,f,y,e=>({don:"Дон мафии",peaceful:"Мирный житель",commissioner:"Комисар"}[e]),e=>`${e/60|0}:${String(e%60).padStart(2,"0")}`,e=>t=>{l.vote(v,e)},e=>t=>{l.kill(v,e)},e=>t=>{l.commissionerAction(v,e)},e=>t=>{l.vote(v,e)},function(e){H[e?"unshift":"push"]((()=>{i=e,n(4,i)}))},function(e){H[e?"unshift":"push"]((()=>{a=e,n(5,a)}))},()=>n(3,d=["kill","check"].find((e=>e!==d)))]}class mt extends J{constructor(e){super(),U(this,e,gt,vt,a,{},[-1,-1])}}function pt(e){let t,n,l,s,i,a,r,o,d;i=new ne({});var h=e[0];return h&&(o=new h({})),{c(){t=f("main"),n=f("div"),l=p(),s=f("div"),G(i.$$.fragment),a=p(),r=f("div"),o&&G(o.$$.fragment),$(n,"class","background svelte-188k38y"),$(s,"class","headerWrapper"),$(r,"class","content svelte-188k38y")},m(e,v){u(e,t,v),c(t,n),c(t,l),c(t,s),K(i,s,null),c(t,a),c(t,r),o&&K(o,r,null),d=!0},p(e,[t]){if(h!==(h=e[0])){if(o){W();const e=o;Y(e.$$.fragment,1,0,(()=>{q(e,1)})),D()}h?(o=new h({}),G(o.$$.fragment),O(o.$$.fragment,1),K(o,r,null)):o=null}},i(e){d||(O(i.$$.fragment,e),o&&O(o.$$.fragment,e),d=!0)},o(e){Y(i.$$.fragment,e),o&&Y(o.$$.fragment,e),d=!1},d(e){e&&v(t),q(i),o&&q(o)}}}function yt(e,t,n){let l;X.add(/^\/$/,(()=>n(0,l=he))),X.add(/^\/game-rules$/,(()=>n(0,l=Le))),X.add(/^\/current-games$/,(()=>n(0,l=Be))),X.add(/^\/game$/,(()=>n(0,l=mt))),X.setNotFound((()=>n(0,l=he))),window.addEventListener("popstate",(()=>X.goWithoutPushState(location.pathname))),X.fromPath(),window.router=X;const s=new class{constructor(e,t){this.elStyle=document.createElement("style"),this.elStyle.type="text/css",this.elStyle.innerText=e,this.attached=!1,t&&t((()=>this.detach))}update(e){this.elStyle.innerText=e}attach(){this.attached||(this.attached=!0,(document.head||document.body).appendChild(this.elStyle))}detach(){this.attached&&(this.attached=!1,this.elStyle.parentNode.removeChild(this.elStyle))}}("");s.attach();const i=()=>{let e=window.innerWidth/1920,t=window.innerHeight/1080;s.update(`\n\t\t:root {\n\t\t\t--widthRate : ${e};\n\t\t\t--heightRate: ${t};\n\t\t\t--devicePixelRatio: ${devicePixelRatio};\n\t\t}\n\t\thtml {\n\t\t\tfont-size: ${e}px;\n\t\t}\n\t`)};return window.addEventListener("resize",i),i(),[l]}return new class extends J{constructor(e){super(),U(this,e,yt,pt,a,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
